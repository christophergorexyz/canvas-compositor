/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/**
 * @license
 * lodash 3.4.0 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern -o ./lodash.js`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.8.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */

!function(t,e){"function"==typeof define&&define.amd?define([],e):t.CanvasCompositor=e()}(this,function(){var t,e,n;return function(r){function i(t,e){return m.call(t,e)}function o(t,e){var n,r,i,o,a,u,s,l,c,f,h,p=e&&e.split("/"),d=_.map,g=d&&d["*"]||{};if(t&&"."===t.charAt(0))if(e){for(t=t.split("/"),a=t.length-1,_.nodeIdCompat&&w.test(t[a])&&(t[a]=t[a].replace(w,"")),t=p.slice(0,p.length-1).concat(t),c=0;c<t.length;c+=1)if(h=t[c],"."===h)t.splice(c,1),c-=1;else if(".."===h){if(1===c&&(".."===t[2]||".."===t[0]))break;c>0&&(t.splice(c-1,2),c-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((p||g)&&d){for(n=t.split("/"),c=n.length;c>0;c-=1){if(r=n.slice(0,c).join("/"),p)for(f=p.length;f>0;f-=1)if(i=d[p.slice(0,f).join("/")],i&&(i=i[r])){o=i,u=c;break}if(o)break;!s&&g&&g[r]&&(s=g[r],l=c)}!o&&s&&(o=s,u=l),o&&(n.splice(0,u,o),t=n.join("/"))}return t}function a(t,e){return function(){var n=x.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),p.apply(r,n.concat([t,e]))}}function u(t){return function(e){return o(e,t)}}function s(t){return function(e){v[t]=e}}function l(t){if(i(y,t)){var e=y[t];delete y[t],b[t]=!0,h.apply(r,e)}if(!i(v,t)&&!i(b,t))throw new Error("No "+t);return v[t]}function c(t){var e,n=t?t.indexOf("!"):-1;return n>-1&&(e=t.substring(0,n),t=t.substring(n+1,t.length)),[e,t]}function f(t){return function(){return _&&_.config&&_.config[t]||{}}}var h,p,d,g,v={},y={},_={},b={},m=Object.prototype.hasOwnProperty,x=[].slice,w=/\.js$/;d=function(t,e){var n,r=c(t),i=r[0];return t=r[1],i&&(i=o(i,e),n=l(i)),i?t=n&&n.normalize?n.normalize(t,u(e)):o(t,e):(t=o(t,e),r=c(t),i=r[0],t=r[1],i&&(n=l(i))),{f:i?i+"!"+t:t,n:t,pr:i,p:n}},g={require:function(t){return a(t)},exports:function(t){var e=v[t];return"undefined"!=typeof e?e:v[t]={}},module:function(t){return{id:t,uri:"",exports:v[t],config:f(t)}}},h=function(t,e,n,o){var u,c,f,h,p,_,m=[],x=typeof n;if(o=o||t,"undefined"===x||"function"===x){for(e=!e.length&&n.length?["require","exports","module"]:e,p=0;p<e.length;p+=1)if(h=d(e[p],o),c=h.f,"require"===c)m[p]=g.require(t);else if("exports"===c)m[p]=g.exports(t),_=!0;else if("module"===c)u=m[p]=g.module(t);else if(i(v,c)||i(y,c)||i(b,c))m[p]=l(c);else{if(!h.p)throw new Error(t+" missing "+c);h.p.load(h.n,a(o,!0),s(c),{}),m[p]=v[c]}f=n?n.apply(v[t],m):void 0,t&&(u&&u.exports!==r&&u.exports!==v[t]?v[t]=u.exports:f===r&&_||(v[t]=f))}else t&&(v[t]=n)},t=e=p=function(t,e,n,i,o){if("string"==typeof t)return g[t]?g[t](e):l(d(t,e).f);if(!t.splice){if(_=t,_.deps&&p(_.deps,_.callback),!e)return;e.splice?(t=e,e=n,n=null):t=r}return e=e||function(){},"function"==typeof n&&(n=i,i=o),i?h(r,t,e,n):setTimeout(function(){h(r,t,e,n)},4),p},p.config=function(t){return p(t)},t._defined=v,n=function(t,e,n){if("string"!=typeof t)throw new Error("See almond README: incorrect module build, no module name");e.splice||(n=e,e=[]),i(v,t)||i(y,t)||(y[t]=[t,e,n])},n.amd={jQuery:!0}}(),n("bower_components/almond/almond",function(){}),function(){function t(t,e){if(t!==e){var n=t===t,r=e===e;if(t>e||!n||"undefined"==typeof t&&r)return 1;if(e>t||!r||"undefined"==typeof e&&n)return-1}return 0}function e(t,e,n){if(e!==e)return p(t,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function r(t){return"function"==typeof t||!1}function i(t){return"string"==typeof t?t:null==t?"":t+""}function o(t){return t.charCodeAt(0)}function a(t,e){for(var n=-1,r=t.length;++n<r&&e.indexOf(t.charAt(n))>-1;);return n}function u(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function s(e,n){return t(e.criteria,n.criteria)||e.index-n.index}function l(e,n,r){for(var i=-1,o=e.criteria,a=n.criteria,u=o.length,s=r.length;++i<u;){var l=t(o[i],a[i]);if(l)return i>=s?l:r[i]?l:-1*l}return e.index-n.index}function c(t){return Ge[t]}function f(t){return Fe[t]}function h(t){return"\\"+He[t]}function p(t,e,n){for(var r=t.length,i=e+(n?0:-1);n?i--:++i<r;){var o=t[i];if(o!==o)return i}return-1}function d(t){return t&&"object"==typeof t||!1}function g(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function v(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;)t[n]===e&&(t[n]=M,o[++i]=n);return o}function y(t,e){for(var n,r=-1,i=t.length,o=-1,a=[];++r<i;){var u=t[r],s=e?e(u,r,t):u;r&&n===s||(n=s,a[++o]=u)}return a}function _(t){for(var e=-1,n=t.length;++e<n&&g(t.charCodeAt(e)););return e}function b(t){for(var e=t.length;e--&&g(t.charCodeAt(e)););return e}function m(t){return Me[t]}function x(n){function g(t){if(d(t)&&!es(t)&&!(t instanceof te)){if(t instanceof Q)return t;if(ou.call(t,"__chain__")&&ou.call(t,"__wrapped__"))return Gr(t)}return new Q(t)}function X(){}function Q(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function te(t){this.__wrapped__=t,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=Bu,this.__views__=null}function Ge(){var t=this.__actions__,e=this.__iteratees__,n=this.__views__,r=new te(this.__wrapped__);return r.__actions__=t?Qe(t):null,r.__dir__=this.__dir__,r.__dropCount__=this.__dropCount__,r.__filtered__=this.__filtered__,r.__iteratees__=e?Qe(e):null,r.__takeCount__=this.__takeCount__,r.__views__=n?Qe(n):null,r}function Fe(){if(this.__filtered__){var t=new te(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Me(){var t=this.__wrapped__.value();if(!es(t))return Qn(t,this.__actions__);var e=this.__dir__,n=0>e,r=wr(0,t.length,this.__views__),i=r.start,o=r.end,a=o-i,u=this.__dropCount__,s=Ru(a,this.__takeCount__),l=n?o:i-1,c=this.__iteratees__,f=c?c.length:0,h=0,p=[];t:for(;a--&&s>h;){l+=e;for(var d=-1,g=t[l];++d<f;){var v=c[d],y=v.iteratee,_=v.type;if(_!=T)var b=y(g);else v.done=v.done&&(n?l<v.index:l>v.index),v.index=l,b=v.done||(v.done=!y(g));if(_==U)g=b;else if(!b){if(_==G)break t;continue t}}u?u--:p[h++]=g}return p}function De(){this.__data__={}}function He(t){return this.has(t)&&delete this.__data__[t]}function ze(t){return"__proto__"==t?w:this.__data__[t]}function Ve(t){return"__proto__"!=t&&ou.call(this.__data__,t)}function Ye(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function $e(t){var e=t?t.length:0;for(this.data={hash:Pu(null),set:new _u};e--;)this.push(t[e])}function Xe(t,e){var n=t.data,r="string"==typeof e||Eo(e)?n.set.has(e):n.hash[e];return r?0:-1}function Je(t){var e=this.data;"string"==typeof t||Eo(t)?e.set.add(t):e.hash[t]=!0}function Qe(t,e){var n=-1,r=t.length;for(e||(e=za(r));++n<r;)e[n]=t[n];return e}function Ze(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function tn(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function en(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function nn(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[++i]=a)}return o}function rn(t,e){for(var n=-1,r=t.length,i=za(r);++n<r;)i[n]=e(t[n],n,t);return i}function on(t){for(var e=-1,n=t.length,r=Wu;++e<n;){var i=t[e];i>r&&(r=i)}return r}function an(t){for(var e=-1,n=t.length,r=Bu;++e<n;){var i=t[e];r>i&&(r=i)}return r}function un(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function sn(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function ln(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function cn(t,e){return"undefined"==typeof t?e:t}function fn(t,e,n,r){return"undefined"!=typeof t&&ou.call(r,n)?t:e}function hn(t,e,n){var r=as(e);if(!n)return dn(e,t,r);for(var i=-1,o=r.length;++i<o;){var a=r[i],u=t[a],s=n(u,e[a],a,t,e);(s===s?s===u:u!==u)&&("undefined"!=typeof u||a in t)||(t[a]=s)}return t}function pn(t,e){for(var n=-1,r=t.length,i=Rr(r),o=e.length,a=za(o);++n<o;){var u=e[n];i?(u=parseFloat(u),a[n]=jr(u,r)?t[u]:w):a[n]=t[u]}return a}function dn(t,e,n){n||(n=e,e={});for(var r=-1,i=n.length;++r<i;){var o=n[r];e[o]=t[o]}return e}function gn(t,e){for(var n=-1,r=e.length;++n<r;){var i=e[n];t[i]=gr(t[i],C,t)}return t}function vn(t,e,n){var r=typeof t;return"function"==r?"undefined"!=typeof e&&Ir(t)?er(t,e,n):t:null==t?La:"object"==r?Un(t):"undefined"==typeof e?Dn(t+""):Gn(t+"",e)}function yn(t,e,n,r,i,o,a){var u;if(n&&(u=i?n(t,r,i):n(t)),"undefined"!=typeof u)return u;if(!Eo(t))return t;var s=es(t);if(s){if(u=Sr(t),!e)return Qe(t,u)}else{var l=uu.call(t),c=l==$;if(l!=K&&l!=D&&(!c||i))return Te[l]?Pr(t,l,e):i?t:{};if(u=Cr(c?{}:t),!e)return dn(t,u,as(t))}o||(o=[]),a||(a=[]);for(var f=o.length;f--;)if(o[f]==t)return a[f];return o.push(t),a.push(u),(s?Ze:En)(t,function(r,i){u[i]=yn(r,e,n,i,t,o,a)}),u}function _n(t,e,n,r){if("function"!=typeof t)throw new Za(F);return bu(function(){t.apply(w,Yn(n,r))},e)}function bn(t,n){var r=t?t.length:0,i=[];if(!r)return i;var o=-1,a=xr(),u=a==e,s=u&&n.length>=200?Vu(n):null,l=n.length;s&&(a=Xe,u=!1,n=s);t:for(;++o<r;){var c=t[o];if(u&&c===c){for(var f=l;f--;)if(n[f]===c)continue t;i.push(c)}else a(n,c,0)<0&&i.push(c)}return i}function mn(t,e){var n=t?t.length:0;if(!Rr(n))return En(t,e);for(var r=-1,i=Ur(t);++r<n&&e(i[r],r,i)!==!1;);return t}function xn(t,e){var n=t?t.length:0;if(!Rr(n))return Ln(t,e);for(var r=Ur(t);n--&&e(r[n],n,r)!==!1;);return t}function wn(t,e){var n=!0;return mn(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Sn(t,e,n,r){var i=t.length;for(n=null==n?0:+n||0,0>n&&(n=-n>i?0:i+n),r="undefined"==typeof r||r>i?i:+r||0,0>r&&(r+=i),i=n>r?0:r>>>0,n>>>=0;i>n;)t[n++]=e;return t}function Cn(t,e){var n=[];return mn(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Pn(t,e,n,r){var i;return n(t,function(t,n,o){return e(t,n,o)?(i=r?n:t,!1):void 0}),i}function In(t,e,n,r){for(var i=r-1,o=t.length,a=-1,u=[];++i<o;){var s=t[i];if(d(s)&&Rr(s.length)&&(es(s)||So(s))){e&&(s=In(s,e,n,0));var l=-1,c=s.length;for(u.length+=c;++l<c;)u[++a]=s[l]}else n||(u[++a]=s)}return u}function jn(t,e,n){for(var r=-1,i=Ur(t),o=n(t),a=o.length;++r<a;){var u=o[r];if(e(i[u],u,i)===!1)break}return t}function On(t,e,n){for(var r=Ur(t),i=n(t),o=i.length;o--;){var a=i[o];if(e(r[a],a,r)===!1)break}return t}function Rn(t,e){return jn(t,e,Zo)}function En(t,e){return jn(t,e,as)}function Ln(t,e){return On(t,e,as)}function An(t,e){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];rs(t[a])&&(o[++i]=a)}return o}function kn(t,e,n){var r=-1,i="function"==typeof e,o=t?t.length:0,a=Rr(o)?za(o):[];return mn(t,function(t){var o=i?e:null!=t&&t[e];a[++r]=o?o.apply(t,n):w}),a}function Wn(t,e,n,r,i,o){if(t===e)return 0!==t||1/t==1/e;var a=typeof t,u=typeof e;return"function"!=a&&"object"!=a&&"function"!=u&&"object"!=u||null==t||null==e?t!==t&&e!==e:Bn(t,e,Wn,n,r,i,o)}function Bn(t,e,n,r,i,o,a){var u=es(t),s=es(e),l=H,c=H;u||(l=uu.call(t),l==D?l=K:l!=K&&(u=Uo(t))),s||(c=uu.call(e),c==D?c=K:c!=K&&(s=Uo(e)));var f=l==K,h=c==K,p=l==c;if(p&&!u&&!f)return yr(t,e,l);var d=f&&ou.call(t,"__wrapped__"),g=h&&ou.call(e,"__wrapped__");if(d||g)return n(d?t.value():t,g?e.value():e,r,i,o,a);if(!p)return!1;o||(o=[]),a||(a=[]);for(var v=o.length;v--;)if(o[v]==t)return a[v]==e;o.push(t),a.push(e);var y=(u?vr:_r)(t,e,n,r,i,o,a);return o.pop(),a.pop(),y}function Nn(t,e,n,r,i){var o=e.length;if(null==t)return!o;for(var a=-1,u=!i;++a<o;)if(u&&r[a]?n[a]!==t[e[a]]:!ou.call(t,e[a]))return!1;for(a=-1;++a<o;){var s=e[a];if(u&&r[a])var l=ou.call(t,s);else{var c=t[s],f=n[a];l=i?i(c,f,s):w,"undefined"==typeof l&&(l=Wn(f,c,i,!0))}if(!l)return!1}return!0}function Tn(t,e){var n=[];return mn(t,function(t,r,i){n.push(e(t,r,i))}),n}function Un(t){var e=as(t),n=e.length;if(1==n){var r=e[0],i=t[r];if(Er(i))return function(t){return null!=t&&t[r]===i&&ou.call(t,r)}}for(var o=za(n),a=za(n);n--;)i=t[e[n]],o[n]=i,a[n]=Er(i);return function(t){return Nn(t,e,o,a)}}function Gn(t,e){return Er(e)?function(n){return null!=n&&n[t]===e}:function(n){return null!=n&&Wn(e,n[t],null,!0)}}function Fn(t,e,n,r,i){if(!Eo(t))return t;var o=Rr(e.length)&&(es(e)||Uo(e));return(o?Ze:En)(e,function(e,a,u){if(d(e))return r||(r=[]),i||(i=[]),Mn(t,u,a,Fn,n,r,i);var s=t[a],l=n?n(s,e,a,t,u):w,c="undefined"==typeof l;c&&(l=e),!o&&"undefined"==typeof l||!c&&(l===l?l===s:s!==s)||(t[a]=l)}),t}function Mn(t,e,n,r,i,o,a){for(var u=o.length,s=e[n];u--;)if(o[u]==s)return void(t[n]=a[u]);var l=t[n],c=i?i(l,s,n,t,e):w,f="undefined"==typeof c;f&&(c=s,Rr(s.length)&&(es(s)||Uo(s))?c=es(l)?l:l?Qe(l):[]:is(s)||So(s)?c=So(l)?Mo(l):is(l)?l:{}:f=!1),o.push(s),a.push(c),f?t[n]=r(c,s,i,o,a):(c===c?c!==l:l===l)&&(t[n]=c)}function Dn(t){return function(e){return null==e?w:e[t]}}function Hn(e,n){var r=n.length,i=pn(e,n);for(n.sort(t);r--;){var o=parseFloat(n[r]);if(o!=a&&jr(o)){var a=o;mu.call(e,o,1)}}return i}function zn(t,e){return t+du(ku()*(e-t+1))}function Vn(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function Yn(t,e,n){var r=-1,i=t.length;e=null==e?0:+e||0,0>e&&(e=-e>i?0:i+e),n="undefined"==typeof n||n>i?i:+n||0,0>n&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=za(i);++r<i;)o[r]=t[r+e];return o}function $n(t,e){var n;return mn(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function Xn(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function qn(t,e,n){var r=-1,i=t.length,o=Rr(i)?za(i):[];return mn(t,function(t){for(var n=e.length,i=za(n);n--;)i[n]=null==t?w:t[e[n]];o[++r]={criteria:i,index:r,value:t}}),Xn(o,function(t,e){return l(t,e,n)})}function Kn(t,n){var r=-1,i=xr(),o=t.length,a=i==e,u=a&&o>=200,s=u?Vu():null,l=[];s?(i=Xe,a=!1):(u=!1,s=n?[]:l);t:for(;++r<o;){var c=t[r],f=n?n(c,r,t):c;if(a&&c===c){for(var h=s.length;h--;)if(s[h]===f)continue t;n&&s.push(f),l.push(c)}else i(s,f,0)<0&&((n||u)&&s.push(f),l.push(c))}return l}function Jn(t,e){for(var n=-1,r=e.length,i=za(r);++n<r;)i[n]=t[e[n]];return i}function Qn(t,e){var n=t;n instanceof te&&(n=n.value());for(var r=-1,i=e.length;++r<i;){var o=[n],a=e[r];vu.apply(o,a.args),n=a.func.apply(a.thisArg,o)}return n}function Zn(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e===e&&Uu>=i){for(;i>r;){var o=r+i>>>1,a=t[o];(n?e>=a:e>a)?r=o+1:i=o}return i}return tr(t,e,La,n)}function tr(t,e,n,r){e=n(e);for(var i=0,o=t?t.length:0,a=e!==e,u="undefined"==typeof e;o>i;){var s=du((i+o)/2),l=n(t[s]),c=l===l;if(a)var f=c||r;else f=u?c&&(r||"undefined"!=typeof l):r?e>=l:e>l;f?i=s+1:o=s}return Ru(o,Tu)}function er(t,e,n){if("function"!=typeof t)return La;if("undefined"==typeof e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)};case 5:return function(n,r,i,o,a){return t.call(e,n,r,i,o,a)}}return function(){return t.apply(e,arguments)}}function nr(t){return fu.call(t,0)}function rr(t,e,n){for(var r=n.length,i=-1,o=Ou(t.length-r,0),a=-1,u=e.length,s=za(o+u);++a<u;)s[a]=e[a];for(;++i<r;)s[n[i]]=t[i];for(;o--;)s[a++]=t[i++];return s}function ir(t,e,n){for(var r=-1,i=n.length,o=-1,a=Ou(t.length-i,0),u=-1,s=e.length,l=za(a+s);++o<a;)l[o]=t[o];for(var c=o;++u<s;)l[c+u]=e[u];for(;++r<i;)l[c+n[r]]=t[o++];return l}function or(t,e){return function(n,r,i){var o=e?e():{};if(r=mr(r,i,3),es(n))for(var a=-1,u=n.length;++a<u;){var s=n[a];t(o,s,r(s,a,n),n)}else mn(n,function(e,n,i){t(o,e,r(e,n,i),i)});return o}}function ar(t){return function(){var e=arguments,n=e.length,r=e[0];if(2>n||null==r)return r;var i=e[n-2],o=e[n-1],a=e[3];n>3&&"function"==typeof i?(i=er(i,o,5),n-=2):(i=n>2&&"function"==typeof o?o:null,n-=i?1:0),a&&Or(e[1],e[2],a)&&(i=3==n?null:i,n=2);for(var u=0;++u<n;){var s=e[u];s&&t(r,s,i)}return r}}function ur(t,e){function n(){return(this instanceof n?r:t).apply(e,arguments)}var r=cr(t);return n}function sr(t){return function(){var e=arguments.length,n=e,r=t?e-1:0;if(!e)return function(){return arguments[0]};for(var i=za(e);n--;)if(i[n]=arguments[n],"function"!=typeof i[n])throw new Za(F);return function(){for(var n=r,o=i[n].apply(this,arguments);t?n--:++n<e;)o=i[n].call(this,o);return o}}}function lr(t){return function(e){for(var n=-1,r=ja(fa(e)),i=r.length,o="";++n<i;)o=t(o,r[n],n);return o}}function cr(t){return function(){var e=Hu(t.prototype),n=t.apply(e,arguments);return Eo(n)?n:e}}function fr(t,e){return function(n,r,i){i&&Or(n,r,i)&&(r=null);var a=mr(),u=null==r;if(a===vn&&u||(u=!1,r=a(r,i,3)),u){var s=es(n);if(s||!To(n))return t(s?n:Tr(n));r=o}return br(n,r,e)}}function hr(t,e,n,r,i,o,a,u,s,l){function c(){for(var m=arguments.length,x=m,w=za(m);x--;)w[x]=arguments[x];if(r&&(w=rr(w,r,i)),o&&(w=ir(w,o,a)),d||y){var S=c.placeholder,I=v(w,S);if(m-=I.length,l>m){var j=u?Qe(u):null,O=Ou(l-m,0),L=d?I:null,A=d?null:I,k=d?w:null,W=d?null:w;e|=d?R:E,e&=~(d?E:R),g||(e&=~(C|P));var B=hr(t,e,n,k,L,W,A,j,s,O);return B.placeholder=S,B}}var N=h?n:this;return p&&(t=N[b]),u&&(w=Wr(w,u)),f&&s<w.length&&(w.length=s),(this instanceof c?_||cr(t):t).apply(N,w)}var f=e&A,h=e&C,p=e&P,d=e&j,g=e&I,y=e&O,_=!p&&cr(t),b=t;return c}function pr(t,e,n){var r=t.length;if(e=+e,r>=e||!Iu(e))return"";var i=e-r;return n=null==n?" ":n+"",ba(n,hu(i/n.length)).slice(0,i)}function dr(t,e,n,r){function i(){for(var e=-1,u=arguments.length,s=-1,l=r.length,c=za(u+l);++s<l;)c[s]=r[s];for(;u--;)c[s++]=arguments[++e];return(this instanceof i?a:t).apply(o?n:this,c)}var o=e&C,a=cr(t);return i}function gr(t,e,n,r,i,o,a,u){var s=e&P;if(!s&&"function"!=typeof t)throw new Za(F);var l=r?r.length:0;if(l||(e&=~(R|E),r=i=null),l-=i?i.length:0,e&E){var c=r,f=i;r=i=null}var h=!s&&Yu(t),p=[t,e,n,r,i,c,f,o,a,u];if(h&&h!==!0&&(Lr(p,h),e=p[1],u=p[9]),p[9]=null==u?s?0:t.length:Ou(u-l,0)||0,e==C)var d=ur(p[0],p[2]);else d=e!=R&&e!=(C|R)||p[4].length?hr.apply(w,p):dr.apply(w,p);var g=h?zu:$u;return g(d,p)}function vr(t,e,n,r,i,o,a){var u=-1,s=t.length,l=e.length,c=!0;if(s!=l&&!(i&&l>s))return!1;for(;c&&++u<s;){var f=t[u],h=e[u];if(c=w,r&&(c=i?r(h,f,u):r(f,h,u)),"undefined"==typeof c)if(i)for(var p=l;p--&&(h=e[p],!(c=f&&f===h||n(f,h,r,i,o,a))););else c=f&&f===h||n(f,h,r,i,o,a)}return!!c}function yr(t,e,n){switch(n){case z:case V:return+t==+e;case Y:return t.name==e.name&&t.message==e.message;case q:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case J:case Z:return t==e+""}return!1}function _r(t,e,n,r,i,o,a){var u=as(t),s=u.length,l=as(e),c=l.length;if(s!=c&&!i)return!1;for(var f,h=-1;++h<s;){var p=u[h],d=ou.call(e,p);if(d){var g=t[p],v=e[p];d=w,r&&(d=i?r(v,g,p):r(g,v,p)),"undefined"==typeof d&&(d=g&&g===v||n(g,v,r,i,o,a))}if(!d)return!1;f||(f="constructor"==p)}if(!f){var y=t.constructor,_=e.constructor;if(y!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _))return!1}return!0}function br(t,e,n){var r=n?Bu:Wu,i=r,o=i;return mn(t,function(t,a,u){var s=e(t,a,u);((n?i>s:s>i)||s===r&&s===o)&&(i=s,o=t)}),o}function mr(t,e,n){var r=g.callback||Ra;return r=r===Ra?vn:r,n?r(t,e,n):r}function xr(t,n,r){var i=g.indexOf||Zr;return i=i===Zr?e:i,t?i(t,n,r):i}function wr(t,e,n){for(var r=-1,i=n?n.length:0;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Ru(e,t+a);break;case"takeRight":t=Ou(t,e-a)}}return{start:t,end:e}}function Sr(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ou.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Cr(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Ka),new e}function Pr(t,e,n){var r=t.constructor;switch(e){case ee:return nr(t);case z:case V:return new r(+t);case ne:case re:case ie:case oe:case ae:case ue:case se:case le:case ce:var i=t.buffer;return new r(n?nr(i):i,t.byteOffset,t.length);case q:case Z:return new r(t);case J:var o=new r(t.source,we.exec(t));o.lastIndex=t.lastIndex}return o}function Ir(t){var e=g.support,n=!(e.funcNames?t.name:e.funcDecomp);if(!n){var r=ru.call(t);e.funcNames||(n=!Se.test(r)),n||(n=Ee.test(r)||ko(t),zu(t,n))}return n}function jr(t,e){return t=+t,e=null==e?Fu:e,t>-1&&t%1==0&&e>t}function Or(t,e,n){if(!Eo(n))return!1;var r=typeof e;if("number"==r)var i=n.length,o=Rr(i)&&jr(e,i);else o="string"==r&&e in n;if(o){var a=n[e];return t===t?t===a:a!==a}return!1}function Rr(t){return"number"==typeof t&&t>-1&&t%1==0&&Fu>=t}function Er(t){return t===t&&(0===t?1/t>0:!Eo(t))}function Lr(t,e){var n=t[1],r=e[1],i=n|r,o=A|L,a=C|P,u=o|a|I|O,s=n&A&&!(r&A),l=n&L&&!(r&L),c=(l?t:e)[7],f=(s?t:e)[8],h=!(n>=L&&r>a||n>a&&r>=L),p=i>=o&&u>=i&&(L>n||(l||s)&&c.length<=f);if(!h&&!p)return t;r&C&&(t[2]=e[2],i|=n&C?0:I);var d=e[3];if(d){var g=t[3];t[3]=g?rr(g,d,e[4]):Qe(d),t[4]=g?v(t[3],M):Qe(e[4])}return d=e[5],d&&(g=t[5],t[5]=g?ir(g,d,e[6]):Qe(d),t[6]=g?v(t[5],M):Qe(e[6])),d=e[7],d&&(t[7]=Qe(d)),r&A&&(t[8]=null==t[8]?e[8]:Ru(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function Ar(t,e){t=Ur(t);for(var n=-1,r=e.length,i={};++n<r;){var o=e[n];o in t&&(i[o]=t[o])}return i}function kr(t,e){var n={};return Rn(t,function(t,r,i){e(t,r,i)&&(n[r]=t)}),n}function Wr(t,e){for(var n=t.length,r=Ru(e.length,n),i=Qe(t);r--;){var o=e[r];t[r]=jr(o,n)?i[o]:w}return t}function Br(t){{var e;g.support}if(!d(t)||uu.call(t)!=K||!ou.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var n;return Rn(t,function(t,e){n=e}),"undefined"==typeof n||ou.call(t,n)}function Nr(t){for(var e=Zo(t),n=e.length,r=n&&t.length,i=g.support,o=r&&Rr(r)&&(es(t)||i.nonEnumArgs&&So(t)),a=-1,u=[];++a<n;){var s=e[a];(o&&jr(s,r)||ou.call(t,s))&&u.push(s)}return u}function Tr(t){return null==t?[]:Rr(t.length)?Eo(t)?t:Ka(t):aa(t)}function Ur(t){return Eo(t)?t:Ka(t)}function Gr(t){return t instanceof te?t.clone():new Q(t.__wrapped__,t.__chain__,Qe(t.__actions__))}function Fr(t,e,n){e=(n?Or(t,e,n):null==e)?1:Ou(+e||1,1);for(var r=0,i=t?t.length:0,o=-1,a=za(hu(i/e));i>r;)a[++o]=Yn(t,r,r+=e);return a}function Mr(t){for(var e=-1,n=t?t.length:0,r=-1,i=[];++e<n;){var o=t[e];o&&(i[++r]=o)}return i}function Dr(){for(var t=arguments,e=-1,n=t.length;++e<n;){var r=t[e];if(es(r)||So(r))break}return bn(r,In(t,!1,!0,++e))}function Hr(t,e,n){var r=t?t.length:0;return r?((n?Or(t,e,n):null==e)&&(e=1),Yn(t,0>e?0:e)):[]}function zr(t,e,n){var r=t?t.length:0;return r?((n?Or(t,e,n):null==e)&&(e=1),e=r-(+e||0),Yn(t,0,0>e?0:e)):[]}function Vr(t,e,n){var r=t?t.length:0;if(!r)return[];for(e=mr(e,n,3);r--&&e(t[r],r,t););return Yn(t,0,r+1)}function Yr(t,e,n){var r=t?t.length:0;if(!r)return[];var i=-1;for(e=mr(e,n,3);++i<r&&e(t[i],i,t););return Yn(t,i)}function $r(t,e,n,r){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Or(t,e,n)&&(n=0,r=i),Sn(t,e,n,r)):[]}function Xr(t,e,n){var r=-1,i=t?t.length:0;for(e=mr(e,n,3);++r<i;)if(e(t[r],r,t))return r;return-1}function qr(t,e,n){var r=t?t.length:0;for(e=mr(e,n,3);r--;)if(e(t[r],r,t))return r;return-1}function Kr(t){return t?t[0]:w}function Jr(t,e,n){var r=t?t.length:0;return n&&Or(t,e,n)&&(e=!1),r?In(t,e,!1,0):[]}function Qr(t){var e=t?t.length:0;return e?In(t,!0,!1,0):[]}function Zr(t,n,r){var i=t?t.length:0;if(!i)return-1;if("number"==typeof r)r=0>r?Ou(i+r,0):r;else if(r){var o=Zn(t,n),a=t[o];return(n===n?n===a:a!==a)?o:-1}return e(t,n,r||0)}function ti(t){return zr(t,1)}function ei(){for(var t=[],n=-1,r=arguments.length,i=[],o=xr(),a=o==e;++n<r;){var u=arguments[n];(es(u)||So(u))&&(t.push(u),i.push(a&&u.length>=120?Vu(n&&u):null))}r=t.length;var s=t[0],l=-1,c=s?s.length:0,f=[],h=i[0];t:for(;++l<c;)if(u=s[l],(h?Xe(h,u):o(f,u,0))<0){for(n=r;--n;){var p=i[n];if((p?Xe(p,u):o(t[n],u,0))<0)continue t}h&&h.push(u),f.push(u)}return f}function ni(t){var e=t?t.length:0;return e?t[e-1]:w}function ri(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(0>n?Ou(r+n,0):Ru(n||0,r-1))+1;else if(n){i=Zn(t,e,!0)-1;var o=t[i];return(e===e?e===o:o!==o)?i:-1}if(e!==e)return p(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1}function ii(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=xr(),i=t.length;++n<i;)for(var o=0,a=t[n];(o=r(e,a,o))>-1;)mu.call(e,o,1);return e}function oi(t){return Hn(t||[],In(arguments,!1,!1,1))}function ai(t,e,n){var r=-1,i=t?t.length:0,o=[];for(e=mr(e,n,3);++r<i;){var a=t[r];e(a,r,t)&&(o.push(a),mu.call(t,r--,1),i--)}return o}function ui(t){return Hr(t,1)}function si(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Or(t,e,n)&&(e=0,n=r),Yn(t,e,n)):[]}function li(t,e,n,r){var i=mr(n);return i===vn&&null==n?Zn(t,e):tr(t,e,i(n,r,1))}function ci(t,e,n,r){var i=mr(n);return i===vn&&null==n?Zn(t,e,!0):tr(t,e,i(n,r,1),!0)}function fi(t,e,n){var r=t?t.length:0;return r?((n?Or(t,e,n):null==e)&&(e=1),Yn(t,0,0>e?0:e)):[]}function hi(t,e,n){var r=t?t.length:0;return r?((n?Or(t,e,n):null==e)&&(e=1),e=r-(+e||0),Yn(t,0>e?0:e)):[]}function pi(t,e,n){var r=t?t.length:0;if(!r)return[];for(e=mr(e,n,3);r--&&e(t[r],r,t););return Yn(t,r+1)}function di(t,e,n){var r=t?t.length:0;if(!r)return[];var i=-1;for(e=mr(e,n,3);++i<r&&e(t[i],i,t););return Yn(t,0,i)}function gi(){return Kn(In(arguments,!1,!0,0))}function vi(t,n,r,i){var o=t?t.length:0;if(!o)return[];null!=n&&"boolean"!=typeof n&&(i=r,r=Or(t,n,i)?null:n,n=!1);var a=mr();return(a!==vn||null!=r)&&(r=a(r,i,3)),n&&xr()==e?y(t,r):Kn(t,r)}function yi(t){for(var e=-1,n=(t&&t.length&&on(rn(t,iu)))>>>0,r=za(n);++e<n;)r[e]=rn(t,Dn(e));return r}function _i(t){return bn(t,Yn(arguments,1))}function bi(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(es(n)||So(n))var r=r?bn(r,n).concat(bn(n,r)):n}return r?Kn(r):[]}function mi(){for(var t=arguments.length,e=za(t);t--;)e[t]=arguments[t];return yi(e)}function xi(t,e){var n=-1,r=t?t.length:0,i={};for(!r||e||es(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function wi(t){var e=g(t);return e.__chain__=!0,e}function Si(t,e,n){return e.call(n,t),t}function Ci(t,e,n){return e.call(n,t)}function Pi(){return wi(this)}function Ii(){return new Q(this.value(),this.__chain__)}function ji(t){for(var e,n=this;n instanceof X;){var r=Gr(n);e?i.__wrapped__=r:e=r;var i=r;n=n.__wrapped__}return i.__wrapped__=t,e}function Oi(){var t=this.__wrapped__;return t instanceof te?(this.__actions__.length&&(t=new te(this)),new Q(t.reverse(),this.__chain__)):this.thru(function(t){return t.reverse()})}function Ri(){return this.value()+""}function Ei(){return Qn(this.__wrapped__,this.__actions__)}function Li(t){var e=t?t.length:0;return Rr(e)&&(t=Tr(t)),pn(t,In(arguments,!1,!1,1))}function Ai(t,e,n){var r=es(t)?en:wn;return("function"!=typeof e||"undefined"!=typeof n)&&(e=mr(e,n,3)),r(t,e)}function ki(t,e,n){var r=es(t)?nn:Cn;return e=mr(e,n,3),r(t,e)}function Wi(t,e,n){if(es(t)){var r=Xr(t,e,n);return r>-1?t[r]:w}return e=mr(e,n,3),Pn(t,e,mn)}function Bi(t,e,n){return e=mr(e,n,3),Pn(t,e,xn)}function Ni(t,e){return Wi(t,Un(e))}function Ti(t,e,n){return"function"==typeof e&&"undefined"==typeof n&&es(t)?Ze(t,e):mn(t,er(e,n,3))}function Ui(t,e,n){return"function"==typeof e&&"undefined"==typeof n&&es(t)?tn(t,e):xn(t,er(e,n,3))}function Gi(t,e,n){var r=t?t.length:0;return Rr(r)||(t=aa(t),r=t.length),r?(n="number"==typeof n?0>n?Ou(r+n,0):n||0:0,"string"==typeof t||!es(t)&&To(t)?r>n&&t.indexOf(e,n)>-1:xr(t,e,n)>-1):!1}function Fi(t,e){return kn(t,e,Yn(arguments,2))}function Mi(t,e,n){var r=es(t)?rn:Tn;return e=mr(e,n,3),r(t,e)}function Di(t,e){return Mi(t,Dn(e))}function Hi(t,e,n,r){var i=es(t)?un:Vn;return i(t,mr(e,r,4),n,arguments.length<3,mn)}function zi(t,e,n,r){var i=es(t)?sn:Vn;return i(t,mr(e,r,4),n,arguments.length<3,xn)}function Vi(t,e,n){var r=es(t)?nn:Cn;return e=mr(e,n,3),r(t,function(t,n,r){return!e(t,n,r)})}function Yi(t,e,n){if(n?Or(t,e,n):null==e){t=Tr(t);var r=t.length;return r>0?t[zn(0,r-1)]:w}var i=$i(t);return i.length=Ru(0>e?0:+e||0,i.length),i}function $i(t){t=Tr(t);for(var e=-1,n=t.length,r=za(n);++e<n;){var i=zn(0,e);e!=i&&(r[e]=r[i]),r[i]=t[e]}return r}function Xi(t){var e=t?t.length:0;return Rr(e)?e:as(t).length}function qi(t,e,n){var r=es(t)?ln:$n;return("function"!=typeof e||"undefined"!=typeof n)&&(e=mr(e,n,3)),r(t,e)}function Ki(t,e,n){if(null==t)return[];var r=-1,i=t.length,o=Rr(i)?za(i):[];return n&&Or(t,e,n)&&(e=null),e=mr(e,n,3),mn(t,function(t,n,i){o[++r]={criteria:e(t,n,i),index:r,value:t}}),Xn(o,s)}function Ji(t){if(null==t)return[];var e=arguments,n=e[3];return n&&Or(e[1],e[2],n)&&(e=[t,e[1]]),qn(t,In(e,!1,!1,1),[])}function Qi(t,e,n,r){return null==t?[]:(r&&Or(e,n,r)&&(n=null),es(e)||(e=null==e?[]:[e]),es(n)||(n=null==n?[]:[n]),qn(t,e,n))}function Zi(t,e){return ki(t,Un(e))}function to(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Za(F);var n=t;t=e,e=n}return t=Iu(t=+t)?t:0,function(){return--t<1?e.apply(this,arguments):void 0}}function eo(t,e,n){return n&&Or(t,e,n)&&(e=null),e=t&&null==e?t.length:Ou(+e||0,0),gr(t,A,null,null,null,null,e)}function no(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new Za(F);var r=t;t=e,e=r}return function(){return--t>0?n=e.apply(this,arguments):e=null,n}}function ro(t,e){var n=C;if(arguments.length>2){var r=Yn(arguments,2),i=v(r,ro.placeholder);n|=R}return gr(t,n,e,r,i)}function io(t){return gn(t,arguments.length>1?In(arguments,!1,!1,1):Ko(t))}function oo(t,e){var n=C|P;if(arguments.length>2){var r=Yn(arguments,2),i=v(r,oo.placeholder);n|=R}return gr(e,n,t,r,i)}function ao(t,e,n){n&&Or(t,e,n)&&(e=null);var r=gr(t,j,null,null,null,null,null,e);return r.placeholder=ao.placeholder,r}function uo(t,e,n){n&&Or(t,e,n)&&(e=null);var r=gr(t,O,null,null,null,null,null,e);return r.placeholder=uo.placeholder,r}function so(t,e,n){function r(){h&&pu(h),s&&pu(s),s=h=p=w}function i(){var n=e-(Qu()-c);if(0>=n||n>e){s&&pu(s);var r=p;s=h=p=w,r&&(d=Qu(),l=t.apply(f,u),h||s||(u=f=null))}else h=bu(i,n)}function o(){h&&pu(h),s=h=p=w,(v||g!==e)&&(d=Qu(),l=t.apply(f,u),h||s||(u=f=null))}function a(){if(u=arguments,c=Qu(),f=this,p=v&&(h||!y),g===!1)var n=y&&!h;else{s||y||(d=c);var r=g-(c-d),a=0>=r||r>g;a?(s&&(s=pu(s)),d=c,l=t.apply(f,u)):s||(s=bu(o,r))}return a&&h?h=pu(h):h||e===g||(h=bu(i,e)),n&&(a=!0,l=t.apply(f,u)),!a||h||s||(u=f=null),l}var u,s,l,c,f,h,p,d=0,g=!1,v=!0;if("function"!=typeof t)throw new Za(F);if(e=0>e?0:+e||0,n===!0){var y=!0;v=!1}else Eo(n)&&(y=n.leading,g="maxWait"in n&&Ou(+n.maxWait||0,e),v="trailing"in n?n.trailing:v);return a.cancel=r,a}function lo(t){return _n(t,1,arguments,1)}function co(t,e){return _n(t,e,arguments,2)}function fo(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Za(F);var n=function(){var r=arguments,i=n.cache,o=e?e.apply(this,r):r[0];if(i.has(o))return i.get(o);var a=t.apply(this,r);return i.set(o,a),a};return n.cache=new fo.Cache,n}function ho(t){if("function"!=typeof t)throw new Za(F);return function(){return!t.apply(this,arguments)}}function po(t){return no(t,2)}function go(t){var e=Yn(arguments,1),n=v(e,go.placeholder);return gr(t,R,null,e,n)}function vo(t){var e=Yn(arguments,1),n=v(e,vo.placeholder);return gr(t,E,null,e,n)}function yo(t){var e=In(arguments,!1,!1,1);return gr(t,L,null,null,null,e)}function _o(t){if("function"!=typeof t)throw new Za(F);return function(e){return t.apply(this,e)}}function bo(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Za(F);return n===!1?r=!1:Eo(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ue.leading=r,Ue.maxWait=+e,Ue.trailing=i,so(t,e,Ue)}function mo(t,e){return e=null==e?La:e,gr(e,R,null,[t],[])}function xo(t,e,n,r){return e&&"boolean"!=typeof e&&Or(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),n="function"==typeof n&&er(n,r,1),yn(t,e,n)}function wo(t,e,n){return e="function"==typeof e&&er(e,n,1),yn(t,!0,e)}function So(t){var e=d(t)?t.length:w;return Rr(e)&&uu.call(t)==D||!1}function Co(t){return t===!0||t===!1||d(t)&&uu.call(t)==z||!1}function Po(t){return d(t)&&uu.call(t)==V||!1}function Io(t){return t&&1===t.nodeType&&d(t)&&uu.call(t).indexOf("Element")>-1||!1}function jo(t){if(null==t)return!0;var e=t.length;return Rr(e)&&(es(t)||To(t)||So(t)||d(t)&&rs(t.splice))?!e:!as(t).length}function Oo(t,e,n,r){if(n="function"==typeof n&&er(n,r,3),!n&&Er(t)&&Er(e))return t===e;var i=n?n(t,e):w;return"undefined"==typeof i?Wn(t,e,n):!!i}function Ro(t){return d(t)&&"string"==typeof t.message&&uu.call(t)==Y||!1}function Eo(t){var e=typeof t;return"function"==e||t&&"object"==e||!1}function Lo(t,e,n,r){var i=as(e),o=i.length;
if(n="function"==typeof n&&er(n,r,3),!n&&1==o){var a=i[0],u=e[a];if(Er(u))return null!=t&&u===t[a]&&ou.call(t,a)}for(var s=za(o),l=za(o);o--;)u=s[o]=e[i[o]],l[o]=Er(u);return Nn(t,i,s,l,n)}function Ao(t){return Bo(t)&&t!=+t}function ko(t){return null==t?!1:uu.call(t)==$?lu.test(ru.call(t)):d(t)&&Pe.test(t)||!1}function Wo(t){return null===t}function Bo(t){return"number"==typeof t||d(t)&&uu.call(t)==q||!1}function No(t){return d(t)&&uu.call(t)==J||!1}function To(t){return"string"==typeof t||d(t)&&uu.call(t)==Z||!1}function Uo(t){return d(t)&&Rr(t.length)&&Ne[uu.call(t)]||!1}function Go(t){return"undefined"==typeof t}function Fo(t){var e=t?t.length:0;return Rr(e)?e?Qe(t):[]:aa(t)}function Mo(t){return dn(t,Zo(t))}function Do(t,e,n){var r=Hu(t);return n&&Or(t,e,n)&&(e=null),e?dn(e,r,as(e)):r}function Ho(t){if(null==t)return t;var e=Qe(arguments);return e.push(cn),os.apply(w,e)}function zo(t,e,n){return e=mr(e,n,3),Pn(t,e,En,!0)}function Vo(t,e,n){return e=mr(e,n,3),Pn(t,e,Ln,!0)}function Yo(t,e,n){return("function"!=typeof e||"undefined"!=typeof n)&&(e=er(e,n,3)),jn(t,e,Zo)}function $o(t,e,n){return e=er(e,n,3),On(t,e,Zo)}function Xo(t,e,n){return("function"!=typeof e||"undefined"!=typeof n)&&(e=er(e,n,3)),En(t,e)}function qo(t,e,n){return e=er(e,n,3),On(t,e,as)}function Ko(t){return An(t,Zo(t))}function Jo(t,e){return t?ou.call(t,e):!1}function Qo(t,e,n){n&&Or(t,e,n)&&(e=null);for(var r=-1,i=as(t),o=i.length,a={};++r<o;){var u=i[r],s=t[u];e?ou.call(a,s)?a[s].push(u):a[s]=[u]:a[s]=u}return a}function Zo(t){if(null==t)return[];Eo(t)||(t=Ka(t));var e=t.length;e=e&&Rr(e)&&(es(t)||Du.nonEnumArgs&&So(t))&&e||0;for(var n=t.constructor,r=-1,i="function"==typeof n&&n.prototype===t,o=za(e),a=e>0;++r<e;)o[r]=r+"";for(var u in t)a&&jr(u,e)||"constructor"==u&&(i||!ou.call(t,u))||o.push(u);return o}function ta(t,e,n){var r={};return e=mr(e,n,3),En(t,function(t,n,i){r[n]=e(t,n,i)}),r}function ea(t,e,n){if(null==t)return{};if("function"!=typeof e){var r=rn(In(arguments,!1,!1,1),Qa);return Ar(t,bn(Zo(t),r))}return e=er(e,n,3),kr(t,function(t,n,r){return!e(t,n,r)})}function na(t){for(var e=-1,n=as(t),r=n.length,i=za(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}function ra(t,e,n){return null==t?{}:"function"==typeof e?kr(t,er(e,n,3)):Ar(t,In(arguments,!1,!1,1))}function ia(t,e,n){var r=null==t?w:t[e];return"undefined"==typeof r&&(r=n),rs(r)?r.call(t):r}function oa(t,e,n,r){var i=es(t)||Uo(t);if(e=mr(e,r,4),null==n)if(i||Eo(t)){var o=t.constructor;n=i?es(t)?new o:[]:Hu(rs(o)&&o.prototype)}else n={};return(i?Ze:En)(t,function(t,r,i){return e(n,t,r,i)}),n}function aa(t){return Jn(t,as(t))}function ua(t){return Jn(t,Zo(t))}function sa(t,e,n){return e=+e||0,"undefined"==typeof n?(n=e,e=0):n=+n||0,t>=e&&n>t}function la(t,e,n){n&&Or(t,e,n)&&(e=n=null);var r=null==t,i=null==e;if(null==n&&(i&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,i=!0)),r&&i&&(e=1,i=!1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var o=ku();return Ru(t+o*(e-t+parseFloat("1e-"+((o+"").length-1))),e)}return zn(t,e)}function ca(t){return t=i(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function fa(t){return t=i(t),t&&t.replace(Ie,c)}function ha(t,e,n){t=i(t),e+="";var r=t.length;return n=("undefined"==typeof n?r:Ru(0>n?0:+n||0,r))-e.length,n>=0&&t.indexOf(e,n)==n}function pa(t){return t=i(t),t&&ye.test(t)?t.replace(ge,f):t}function da(t){return t=i(t),t&&Re.test(t)?t.replace(Oe,"\\$&"):t}function ga(t,e,n){t=i(t),e=+e;var r=t.length;if(r>=e||!Iu(e))return t;var o=(e-r)/2,a=du(o),u=hu(o);return n=pr("",u,n),n.slice(0,a)+t+n}function va(t,e,n){return t=i(t),t&&pr(t,e,n)+t}function ya(t,e,n){return t=i(t),t&&t+pr(t,e,n)}function _a(t,e,n){return n&&Or(t,e,n)&&(e=0),Au(t,e)}function ba(t,e){var n="";if(t=i(t),e=+e,1>e||!t||!Iu(e))return n;do e%2&&(n+=t),e=du(e/2),t+=t;while(e);return n}function ma(t,e,n){return t=i(t),n=null==n?0:Ru(0>n?0:+n||0,t.length),t.lastIndexOf(e,n)==n}function xa(t,e,n){var r=g.templateSettings;n&&Or(t,e,n)&&(e=n=null),t=i(t),e=hn(hn({},n||e),r,fn);var o,a,u=hn(hn({},e.imports),r.imports,fn),s=as(u),l=Jn(u,s),c=0,f=e.interpolate||je,p="__p += '",d=Ja((e.escape||je).source+"|"+f.source+"|"+(f===me?xe:je).source+"|"+(e.evaluate||je).source+"|$","g"),v="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Be+"]")+"\n";t.replace(d,function(e,n,r,i,u,s){return r||(r=i),p+=t.slice(c,s).replace(Le,h),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),u&&(a=!0,p+="';\n"+u+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=s+e.length,e}),p+="';\n";var y=e.variable;y||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(fe,""):p).replace(he,"$1").replace(pe,"$1;"),p="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var _=Oa(function(){return $a(s,v+"return "+p).apply(w,l)});if(_.source=p,Ro(_))throw _;return _}function wa(t,e,n){var r=t;return(t=i(t))?(n?Or(r,e,n):null==e)?t.slice(_(t),b(t)+1):(e+="",t.slice(a(t,e),u(t,e)+1)):t}function Sa(t,e,n){var r=t;return t=i(t),t?t.slice((n?Or(r,e,n):null==e)?_(t):a(t,e+"")):t}function Ca(t,e,n){var r=t;return t=i(t),t?(n?Or(r,e,n):null==e)?t.slice(0,b(t)+1):t.slice(0,u(t,e+"")+1):t}function Pa(t,e,n){n&&Or(t,e,n)&&(e=null);var r=k,o=W;if(null!=e)if(Eo(e)){var a="separator"in e?e.separator:a;r="length"in e?+e.length||0:r,o="omission"in e?i(e.omission):o}else r=+e||0;if(t=i(t),r>=t.length)return t;var u=r-o.length;if(1>u)return o;var s=t.slice(0,u);if(null==a)return s+o;if(No(a)){if(t.slice(u).search(a)){var l,c,f=t.slice(0,u);for(a.global||(a=Ja(a.source,(we.exec(a)||"")+"g")),a.lastIndex=0;l=a.exec(f);)c=l.index;s=s.slice(0,null==c?u:c)}}else if(t.indexOf(a,u)!=u){var h=s.lastIndexOf(a);h>-1&&(s=s.slice(0,h))}return s+o}function Ia(t){return t=i(t),t&&ve.test(t)?t.replace(de,m):t}function ja(t,e,n){return n&&Or(t,e,n)&&(e=null),t=i(t),t.match(e||Ae)||[]}function Oa(){for(var t=arguments[0],e=arguments.length,n=za(e?e-1:0);--e>0;)n[e-1]=arguments[e];try{return t.apply(w,n)}catch(r){return Ro(r)?r:new Ya(r)}}function Ra(t,e,n){return n&&Or(t,e,n)&&(e=null),d(t)?Aa(t):vn(t,e)}function Ea(t){return function(){return t}}function La(t){return t}function Aa(t){return Un(yn(t,!0))}function ka(t,e){return Gn(t+"",yn(e,!0))}function Wa(t,e,n){if(null==n){var r=Eo(e),i=r&&as(e),o=i&&i.length&&An(e,i);(o?o.length:r)||(o=!1,n=e,e=t,t=this)}o||(o=An(e,as(e)));var a=!0,u=-1,s=rs(t),l=o.length;n===!1?a=!1:Eo(n)&&"chain"in n&&(a=n.chain);for(;++u<l;){var c=o[u],f=e[c];t[c]=f,s&&(t.prototype[c]=function(e){return function(){var n=this.__chain__;if(a||n){var r=t(this.__wrapped__);return(r.__actions__=Qe(this.__actions__)).push({func:e,args:arguments,thisArg:t}),r.__chain__=n,r}var i=[this.value()];return vu.apply(i,arguments),e.apply(t,i)}}(f))}return t}function Ba(){return n._=su,this}function Na(){}function Ta(t){return Dn(t+"")}function Ua(t){return function(e){return null==t?w:t[e]}}function Ga(t,e,n){n&&Or(t,e,n)&&(e=n=null),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var r=-1,i=Ou(hu((e-t)/(n||1)),0),o=za(i);++r<i;)o[r]=t,t+=n;return o}function Fa(t,e,n){if(t=+t,1>t||!Iu(t))return[];var r=-1,i=za(Ru(t,Nu));for(e=er(e,n,1);++r<t;)Nu>r?i[r]=e(r):e(r);return i}function Ma(t){var e=++au;return i(t)+e}function Da(t,e){return t+e}function Ha(t){es(t)||(t=Tr(t));for(var e=t.length,n=0;e--;)n+=+t[e]||0;return n}n=n?Ke.defaults(qe.Object(),n,Ke.pick(qe,We)):qe;var za=n.Array,Va=n.Date,Ya=n.Error,$a=n.Function,Xa=n.Math,qa=n.Number,Ka=n.Object,Ja=n.RegExp,Qa=n.String,Za=n.TypeError,tu=za.prototype,eu=Ka.prototype,nu=(nu=n.window)&&nu.document,ru=$a.prototype.toString,iu=Dn("length"),ou=eu.hasOwnProperty,au=0,uu=eu.toString,su=n._,lu=Ja("^"+da(uu).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),cu=ko(cu=n.ArrayBuffer)&&cu,fu=ko(fu=cu&&new cu(0).slice)&&fu,hu=Xa.ceil,pu=n.clearTimeout,du=Xa.floor,gu=ko(gu=Ka.getPrototypeOf)&&gu,vu=tu.push,yu=eu.propertyIsEnumerable,_u=ko(_u=n.Set)&&_u,bu=n.setTimeout,mu=tu.splice,xu=ko(xu=n.Uint8Array)&&xu,wu=ko(wu=n.WeakMap)&&wu,Su=function(){try{var t=ko(t=n.Float64Array)&&t,e=new t(new cu(10),0,1)&&t}catch(r){}return e}(),Cu=ko(Cu=za.isArray)&&Cu,Pu=ko(Pu=Ka.create)&&Pu,Iu=n.isFinite,ju=ko(ju=Ka.keys)&&ju,Ou=Xa.max,Ru=Xa.min,Eu=ko(Eu=Va.now)&&Eu,Lu=ko(Lu=qa.isFinite)&&Lu,Au=n.parseInt,ku=Xa.random,Wu=qa.NEGATIVE_INFINITY,Bu=qa.POSITIVE_INFINITY,Nu=Xa.pow(2,32)-1,Tu=Nu-1,Uu=Nu>>>1,Gu=Su?Su.BYTES_PER_ELEMENT:0,Fu=Xa.pow(2,53)-1,Mu=wu&&new wu,Du=g.support={};!function(){Du.funcDecomp=!ko(n.WinRTError)&&Ee.test(x),Du.funcNames="string"==typeof $a.name;try{Du.dom=11===nu.createDocumentFragment().nodeType}catch(t){Du.dom=!1}try{Du.nonEnumArgs=!yu.call(arguments,1)}catch(t){Du.nonEnumArgs=!0}}(0,0),g.templateSettings={escape:_e,evaluate:be,interpolate:me,variable:"",imports:{_:g}};var Hu=function(){function t(){}return function(e){if(Eo(e)){t.prototype=e;var r=new t;t.prototype=null}return r||n.Object()}}(),zu=Mu?function(t,e){return Mu.set(t,e),t}:La;fu||(nr=cu&&xu?function(t){var e=t.byteLength,n=Su?du(e/Gu):0,r=n*Gu,i=new cu(e);if(n){var o=new Su(i,0,n);o.set(new Su(t,0,n))}return e!=r&&(o=new xu(i,r),o.set(new xu(t,r))),i}:Ea(null));var Vu=Pu&&_u?function(t){return new $e(t)}:Ea(null),Yu=Mu?function(t){return Mu.get(t)}:Na,$u=function(){var t=0,e=0;return function(n,r){var i=Qu(),o=N-(i-e);if(e=i,o>0){if(++t>=B)return n}else t=0;return zu(n,r)}}(),Xu=or(function(t,e,n){ou.call(t,n)?++t[n]:t[n]=1}),qu=or(function(t,e,n){ou.call(t,n)?t[n].push(e):t[n]=[e]}),Ku=or(function(t,e,n){t[n]=e}),Ju=or(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Qu=Eu||function(){return(new Va).getTime()},Zu=sr(),ts=sr(!0),es=Cu||function(t){return d(t)&&Rr(t.length)&&uu.call(t)==H||!1};Du.dom||(Io=function(t){return t&&1===t.nodeType&&d(t)&&!is(t)||!1});var ns=Lu||function(t){return"number"==typeof t&&Iu(t)},rs=r(/x/)||xu&&!r(xu)?function(t){return uu.call(t)==$}:r,is=gu?function(t){if(!t||uu.call(t)!=K)return!1;var e=t.valueOf,n=ko(e)&&(n=gu(e))&&gu(n);return n?t==n||gu(t)==n:Br(t)}:Br,os=ar(hn),as=ju?function(t){if(t)var e=t.constructor,n=t.length;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&n&&Rr(n)?Nr(t):Eo(t)?ju(t):[]}:Nr,us=ar(Fn),ss=lr(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),ls=lr(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()});8!=Au(ke+"08")&&(_a=function(t,e,n){return(n?Or(t,e,n):null==e)?e=0:e&&(e=+e),t=wa(t),Au(t,e||(Ce.test(t)?16:10))});var cs=lr(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),fs=lr(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),hs=fr(on),ps=fr(an,!0);return g.prototype=X.prototype,Q.prototype=Hu(X.prototype),Q.prototype.constructor=Q,te.prototype=Hu(X.prototype),te.prototype.constructor=te,De.prototype["delete"]=He,De.prototype.get=ze,De.prototype.has=Ve,De.prototype.set=Ye,$e.prototype.push=Je,fo.Cache=De,g.after=to,g.ary=eo,g.assign=os,g.at=Li,g.before=no,g.bind=ro,g.bindAll=io,g.bindKey=oo,g.callback=Ra,g.chain=wi,g.chunk=Fr,g.compact=Mr,g.constant=Ea,g.countBy=Xu,g.create=Do,g.curry=ao,g.curryRight=uo,g.debounce=so,g.defaults=Ho,g.defer=lo,g.delay=co,g.difference=Dr,g.drop=Hr,g.dropRight=zr,g.dropRightWhile=Vr,g.dropWhile=Yr,g.fill=$r,g.filter=ki,g.flatten=Jr,g.flattenDeep=Qr,g.flow=Zu,g.flowRight=ts,g.forEach=Ti,g.forEachRight=Ui,g.forIn=Yo,g.forInRight=$o,g.forOwn=Xo,g.forOwnRight=qo,g.functions=Ko,g.groupBy=qu,g.indexBy=Ku,g.initial=ti,g.intersection=ei,g.invert=Qo,g.invoke=Fi,g.keys=as,g.keysIn=Zo,g.map=Mi,g.mapValues=ta,g.matches=Aa,g.matchesProperty=ka,g.memoize=fo,g.merge=us,g.mixin=Wa,g.negate=ho,g.omit=ea,g.once=po,g.pairs=na,g.partial=go,g.partialRight=vo,g.partition=Ju,g.pick=ra,g.pluck=Di,g.property=Ta,g.propertyOf=Ua,g.pull=ii,g.pullAt=oi,g.range=Ga,g.rearg=yo,g.reject=Vi,g.remove=ai,g.rest=ui,g.shuffle=$i,g.slice=si,g.sortBy=Ki,g.sortByAll=Ji,g.sortByOrder=Qi,g.spread=_o,g.take=fi,g.takeRight=hi,g.takeRightWhile=pi,g.takeWhile=di,g.tap=Si,g.throttle=bo,g.thru=Ci,g.times=Fa,g.toArray=Fo,g.toPlainObject=Mo,g.transform=oa,g.union=gi,g.uniq=vi,g.unzip=yi,g.values=aa,g.valuesIn=ua,g.where=Zi,g.without=_i,g.wrap=mo,g.xor=bi,g.zip=mi,g.zipObject=xi,g.backflow=ts,g.collect=Mi,g.compose=ts,g.each=Ti,g.eachRight=Ui,g.extend=os,g.iteratee=Ra,g.methods=Ko,g.object=xi,g.select=ki,g.tail=ui,g.unique=vi,Wa(g,g),g.add=Da,g.attempt=Oa,g.camelCase=ss,g.capitalize=ca,g.clone=xo,g.cloneDeep=wo,g.deburr=fa,g.endsWith=ha,g.escape=pa,g.escapeRegExp=da,g.every=Ai,g.find=Wi,g.findIndex=Xr,g.findKey=zo,g.findLast=Bi,g.findLastIndex=qr,g.findLastKey=Vo,g.findWhere=Ni,g.first=Kr,g.has=Jo,g.identity=La,g.includes=Gi,g.indexOf=Zr,g.inRange=sa,g.isArguments=So,g.isArray=es,g.isBoolean=Co,g.isDate=Po,g.isElement=Io,g.isEmpty=jo,g.isEqual=Oo,g.isError=Ro,g.isFinite=ns,g.isFunction=rs,g.isMatch=Lo,g.isNaN=Ao,g.isNative=ko,g.isNull=Wo,g.isNumber=Bo,g.isObject=Eo,g.isPlainObject=is,g.isRegExp=No,g.isString=To,g.isTypedArray=Uo,g.isUndefined=Go,g.kebabCase=ls,g.last=ni,g.lastIndexOf=ri,g.max=hs,g.min=ps,g.noConflict=Ba,g.noop=Na,g.now=Qu,g.pad=ga,g.padLeft=va,g.padRight=ya,g.parseInt=_a,g.random=la,g.reduce=Hi,g.reduceRight=zi,g.repeat=ba,g.result=ia,g.runInContext=x,g.size=Xi,g.snakeCase=cs,g.some=qi,g.sortedIndex=li,g.sortedLastIndex=ci,g.startCase=fs,g.startsWith=ma,g.sum=Ha,g.template=xa,g.trim=wa,g.trimLeft=Sa,g.trimRight=Ca,g.trunc=Pa,g.unescape=Ia,g.uniqueId=Ma,g.words=ja,g.all=Ai,g.any=qi,g.contains=Gi,g.detect=Wi,g.foldl=Hi,g.foldr=zi,g.head=Kr,g.include=Gi,g.inject=Hi,Wa(g,function(){var t={};return En(g,function(e,n){g.prototype[n]||(t[n]=e)}),t}(),!1),g.sample=Yi,g.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return Yi(e,t)}):Yi(this.value())},g.VERSION=S,Ze(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){g[t].placeholder=g}),Ze(["dropWhile","filter","map","takeWhile"],function(t,e){var n=e!=U,r=e==T;te.prototype[t]=function(t,i){var o=this.__filtered__,a=o&&r?new te(this):this.clone(),u=a.__iteratees__||(a.__iteratees__=[]);return a.__filtered__=o||n,u.push({done:!1,index:0,iteratee:mr(t,i,1),type:e}),a}}),Ze(["drop","take"],function(t,e){var n="__"+t+"Count__",r=t+"While";te.prototype[t]=function(r){r=null==r?1:Ou(du(r)||0,0);var i=this.clone();if(i.__filtered__){var o=i[n];i[n]=e?Ru(o,r):o+r}else{var a=i.__views__||(i.__views__=[]);a.push({size:r,type:t+(i.__dir__<0?"Right":"")})}return i},te.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()},te.prototype[t+"RightWhile"]=function(t,e){return this.reverse()[r](t,e).reverse()}}),Ze(["first","last"],function(t,e){var n="take"+(e?"Right":"");te.prototype[t]=function(){return this[n](1).value()[0]}}),Ze(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");te.prototype[t]=function(){return this[n](1)}}),Ze(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?Un:Dn;te.prototype[t]=function(t){return this[n](r(t))}}),te.prototype.compact=function(){return this.filter(La)},te.prototype.reject=function(t,e){return t=mr(t,e,1),this.filter(function(e){return!t(e)})},te.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=0>t?this.takeRight(-t):this.drop(t);return"undefined"!=typeof e&&(e=+e||0,n=0>e?n.dropRight(-e):n.take(e-t)),n},te.prototype.toArray=function(){return this.drop(0)},En(te.prototype,function(t,e){var n=g[e],r=/^(?:filter|map|reject)|While$/.test(e),i=/^(?:first|last)$/.test(e);g.prototype[e]=function(){var e=arguments,o=(e.length,this.__chain__),a=this.__wrapped__,u=!!this.__actions__.length,s=a instanceof te;if(s&&r){var l=e[0];s=!("function"==typeof l&&1!=l.length)}var c=s&&!u;if(i&&!o)return c?t.call(a):n.call(g,this.value());var f=function(t){var r=[t];return vu.apply(r,e),n.apply(g,r)};if(s||es(a)){var h=c?a:new te(this),p=t.apply(h,e);if(!i&&(u||p.__actions__)){var d=p.__actions__||(p.__actions__=[]);d.push({func:Ci,args:[f],thisArg:g})}return new Q(p,o)}return this.thru(f)}}),Ze(["concat","join","pop","push","shift","sort","splice","unshift"],function(t){var e=tu[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:join|pop|shift)$/.test(t);g.prototype[t]=function(){var t=arguments;return r&&!this.__chain__?e.apply(this.value(),t):this[n](function(n){return e.apply(n,t)})}}),te.prototype.clone=Ge,te.prototype.reverse=Fe,te.prototype.value=Me,g.prototype.chain=Pi,g.prototype.commit=Ii,g.prototype.plant=ji,g.prototype.reverse=Oi,g.prototype.toString=Ri,g.prototype.run=g.prototype.toJSON=g.prototype.valueOf=g.prototype.value=Ei,g.prototype.collect=g.prototype.map,g.prototype.head=g.prototype.first,g.prototype.select=g.prototype.filter,g.prototype.tail=g.prototype.rest,g}var w,S="3.4.0",C=1,P=2,I=4,j=8,O=16,R=32,E=64,L=128,A=256,k=30,W="...",B=150,N=16,T=0,U=2,G=3,F="Expected a function",M="__lodash_placeholder__",D="[object Arguments]",H="[object Array]",z="[object Boolean]",V="[object Date]",Y="[object Error]",$="[object Function]",X="[object Map]",q="[object Number]",K="[object Object]",J="[object RegExp]",Q="[object Set]",Z="[object String]",te="[object WeakMap]",ee="[object ArrayBuffer]",ne="[object Float32Array]",re="[object Float64Array]",ie="[object Int8Array]",oe="[object Int16Array]",ae="[object Int32Array]",ue="[object Uint8Array]",se="[object Uint8ClampedArray]",le="[object Uint16Array]",ce="[object Uint32Array]",fe=/\b__p \+= '';/g,he=/\b(__p \+=) '' \+/g,pe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,de=/&(?:amp|lt|gt|quot|#39|#96);/g,ge=/[&<>"'`]/g,ve=RegExp(de.source),ye=RegExp(ge.source),_e=/<%-([\s\S]+?)%>/g,be=/<%([\s\S]+?)%>/g,me=/<%=([\s\S]+?)%>/g,xe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,we=/\w*$/,Se=/^\s*function[ \n\r\t]+\w/,Ce=/^0[xX]/,Pe=/^\[object .+?Constructor\]$/,Ie=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,je=/($^)/,Oe=/[.*+?^${}()|[\]\/\\]/g,Re=RegExp(Oe.source),Ee=/\bthis\b/,Le=/['\n\r\u2028\u2029\\]/g,Ae=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),ke=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",We=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window","WinRTError"],Be=-1,Ne={};Ne[ne]=Ne[re]=Ne[ie]=Ne[oe]=Ne[ae]=Ne[ue]=Ne[se]=Ne[le]=Ne[ce]=!0,Ne[D]=Ne[H]=Ne[ee]=Ne[z]=Ne[V]=Ne[Y]=Ne[$]=Ne[X]=Ne[q]=Ne[K]=Ne[J]=Ne[Q]=Ne[Z]=Ne[te]=!1;var Te={};Te[D]=Te[H]=Te[ee]=Te[z]=Te[V]=Te[ne]=Te[re]=Te[ie]=Te[oe]=Te[ae]=Te[q]=Te[K]=Te[J]=Te[Z]=Te[ue]=Te[se]=Te[le]=Te[ce]=!0,Te[Y]=Te[$]=Te[X]=Te[Q]=Te[te]=!1;var Ue={leading:!1,maxWait:0,trailing:!1},Ge={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Fe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Me={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},De={"function":!0,object:!0},He={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ze=De[typeof exports]&&exports&&!exports.nodeType&&exports,Ve=De[typeof module]&&module&&!module.nodeType&&module,Ye=ze&&Ve&&"object"==typeof global&&global,$e=De[typeof window]&&window,Xe=Ve&&Ve.exports===ze&&ze,qe=Ye||$e!==(this&&this.window)&&$e||this,Ke=x();"function"==typeof n&&"object"==typeof n.amd&&n.amd?(qe._=Ke,n("lodash",[],function(){return Ke})):ze&&Ve?Xe?(Ve.exports=Ke)._=Ke:ze._=Ke:qe._=Ke}.call(this),n("renderer",["lodash"],function(t){var e={DEFAULTS:{fillStyle:"black",strokeStyle:"black",lineCap:"round",lineWidth:1,lineJoin:"round",miterLimit:10,font:"10px sans-serif",textAlign:"start",textBaseline:"alphabetic"},mask:!1,clearRect:function(t,e,n,r,i){t.clearRect(e,n,r,i)},drawPath:function(e,n,r){t.assign(e,r||{}),e.beginPath();var i=!1,o=0,a=0;for(var u in n)o=n[u].x,a=n[u].y,i?e.lineTo(o,a):(e.moveTo(o,a),i=!0);e.stroke(),e.closePath()},drawRectangle:function(e,n,r,i,o,a){t.assign(e,a||{}),e.beginPath(),e.rect(n,r,i,o),e.fill(),e.stroke(),e.closePath()},drawEllipse:function(e,n,r,i,o,a){t.assign(e,a||{}),e.beginPath(),e.ellipse(n,r,i,o,0,0,2*Math.PI),e.fill(),e.stroke(),e.closePath()},drawCircle:function(e,n,r,i,o){t.assign(e,o||{}),e.beginPath(),e.arc(n,r,i,0,2*Math.PI),e.fill(),e.stroke(),e.closePath()},drawText:function(e,n,r,i,o){t.assign(e,o||{}),e.beginPath(),e.fillText(i,n,r),e.closePath()},measureText:function(e,n,r){return t.assign(e,r||{}),e.measureText(n)},drawImage:function(e,n,r,i,o){t.assign(e,o||{}),i.width>0&&i.height>0&&(e.beginPath(),e.drawImage(i,n,r,i.width,i.height),e.closePath())}};return e}),n("vector",["lodash"],function(t){function e(e,n){var r=t.zip.apply(null,e);return t.map(r,function(e){return t.reduce(e,n)})}function n(e){var n=1/Math.max.apply(null,t.map(e,function(t){return Math.abs(t)}));return t.map(e,function(t){return t*n})}function r(t){this.coordinates=t}return Object.defineProperty(r.prototype,"unitVector",{configurable:!0,enumerable:!0,get:function(){return new r(n(this.coordinates))}}),Object.defineProperty(r.prototype,"x",{configurable:!0,enumerable:!0,get:function(){return this.coordinates[0]},set:function(t){this.coordinates[0]=t}}),Object.defineProperty(r.prototype,"y",{configurable:!0,enumerable:!0,get:function(){return this.coordinates[1]},set:function(t){this.coordinates[1]=t}}),Object.defineProperty(r.prototype,"z",{configurable:!0,enumerable:!0,get:function(){return this.coordinates[2]},set:function(t){this.coordinates[2]=t}}),r.prototype.add=function(t){return r.add(this,t)},r.prototype.subtract=function(t){return r.subtract(this,t)},r.prototype.multiply=function(t){return r.multiply(this,t)},r.add=function(t,n){return new r(e([t.coordinates,n.coordinates],function(t,e){return t+e}))},r.subtract=function(t,n){return new r(e([t.coordinates,n.coordinates],function(t,e){return t-e}))},r.multiply=function(n,i){return new r(isNaN(i)?e([n.coordinates,i.coordinates],function(t,e){return t*e}):t.map(n.coordinates,function(t){return t*i}))},r.prototype.coordinates=[],r}),n("canvas-object",["lodash","vector","renderer"],function(t,e,n){function r(r){this.d=new e([r.x||0,r.y||0]),this.style=t.assign({},n.DEFAULTS,r.style),this.unscaledLineWidth=this.style.lineWidth,this.pressPassThrough=r.pressPassThrough||!1,this.draggable=r.draggable||!1,this.drawBoundingBox=!1,this.boundingBoxColor="#cccccc",this._needsUpdate=!1,this._needsRender=!0,this._scaleWidth=1,this._scaleHeight=1,this._prerenderedImage=document.createElement("canvas"),this._prerenderingContext=this._prerenderedImage.getContext("2d"),this.parent=r.parent||null,this.draggable&&this.enableDragging(),this.sticky=!1,this.stickyPosition=null,Object.defineProperty(this,"offset",{configurable:!0,enumerable:!0,get:function(){return this.parent?this.d.add(this.parent.offset):this.d}}),Object.defineProperty(this,"NeedsUpdate",{configurable:!0,enumerable:!0,set:function(t){return this.parent&&t&&(this.parent.NeedsUpdate=t),this._needsUpdate=t},get:function(){return this._needsUpdate}}),Object.defineProperty(this,"NeedsRender",{configurable:!0,enumerable:!0,set:function(t){return this.parent&&t&&(this.parent.NeedsRender=t),this._needsRender=t},get:function(){return this._needsRender}}),Object.defineProperty(this,"Scale",{configurable:!0,enumerable:!0,set:function(t){this.ScaleWidth=t,this.ScaleHeight=t},get:function(){return{scaleWidth:this.ScaleWidth,scaleHeight:this.ScaleHeight}}}),Object.defineProperty(this,"ScaleWidth",{configurable:!0,enumerable:!0,set:function(e){this.NeedsUpdate=!0,this.NeedsRender=!0,this.children&&(t.each(this.children,function(t){t.NeedsUpdate=!0,t.NeedsRender=!0}),t.each(this.masks,function(t){t.NeedsUpdate=!0,t.NeedsRender=!0})),this._scaleWidth=e},get:function(){return this._scaleWidth}}),Object.defineProperty(this,"ScaleHeight",{configurable:!0,enumerable:!0,set:function(e){this.NeedsUpdate=!0,this.NeedsRender=!0,this.children&&(t.each(this.children,function(t){t.NeedsUpdate=!0,t.NeedsRender=!0}),t.each(this.masks,function(t){t.NeedsUpdate=!0,t.NeedsRender=!0})),this._scaleHeight=e},get:function(){return this._scaleHeight}}),Object.defineProperty(this,"GlobalScale",{configurable:!0,enumerable:!0,get:function(){var t=this._scaleWidth,e=this._scaleHeight;if(this.parent){var n=this.parent.GlobalScale;t*=n.scaleWidth,e*=n.scaleHeight}return{scaleHeight:t,scaleWidth:e}}}),Object.defineProperty(this,"GlobalLineScale",{configurable:!0,enumerable:!0,get:function(){return Math.min(this.GlobalScale.scaleWidth,this.GlobalScale.scaleHeight)}}),Object.defineProperty(this,"GlobalFontScale",{configurable:!0,enumerable:!0,get:function(){return Math.min(this.GlobalScale.scaleWidth,this.GlobalScale.scaleHeight)}})}return r.prototype.enableDragging=function(){this.onpressdown=this.dragStart},r.prototype.disableDragging=function(){this.onpressdown=null,this.onpressmove=null,this.onpressup=null,this.onpresscancel=null,this.NeedsRender=!0,this.NeedsUpdate=!0},r.prototype.dragStart=function(t){this.mouseOffset=new e([t.offsetX,t.offsetY]).subtract(this.offset),this.onpressdown=null,this.onpressmove=this.drag,this.onpressup=this.dragEnd,this.onpresscancel=this.dragEnd},r.prototype.drag=function(t){this.d=new e([t.offsetX,t.offsetY]).subtract(this.mouseOffset),this.NeedsRender=!0,this.NeedsUpdate=!0},r.prototype.dragEnd=function(){this.onpressdown=this.dragStart,this.onpressmove=null,this.onpressup=null,this.onpresscancel=null,this.NeedsRender=!0,this.NeedsUpdate=!0},r.prototype.draggable=!1,r.prototype.context=null,r.prototype.style=null,r.prototype.scale=1,r.prototype.flags={DEBUG:!1},r.prototype.draw=function(t,e){this.NeedsUpdate=!1,this.NeedsRender&&this.render&&(delete this._prerenderedImage,delete this._prerenderingContext,this._prerenderedImage=document.createElement("canvas"),this._prerenderingContext=this._prerenderedImage.getContext("2d"),this._prerenderedImage.width=this.boundingBox.right-this.boundingBox.left,this._prerenderedImage.height=this.boundingBox.bottom-this.boundingBox.top,this.style.lineWidth=this.unscaledLineWidth*this.GlobalLineScale,this.render(),this.NeedsRender=!1),this.flags.DEBUG&&(this._prerenderingContext.beginPath(),this._prerenderingContext.lineWidth=2,this._prerenderingContext.strokeStyle="#FF0000",this._prerenderingContext.strokeRect(0,0,this._prerenderedImage.width,this._prerenderedImage.height),this._prerenderingContext.closePath()),this.drawBoundingBox&&(this._prerenderingContext.beginPath(),this._prerenderingContext.lineWidth=2,this._prerenderingContext.strokeStyle=this.boundingBoxColor,this._prerenderingContext.strokeRect(0,0,this._prerenderedImage.width,this._prerenderedImage.height),this._prerenderingContext.closePath());var r=this.boundingBox.left+(e&&e.left?e.left:0),i=this.boundingBox.top+(e&&e.top?e.top:0);n.drawImage(t,r,i,this._prerenderedImage,this.style)},r.prototype.render=function(){},r.prototype.PointIsInBoundingBox=function(t,e){return t>this.boundingBox.left&&e>this.boundingBox.top&&t<this.boundingBox.right&&e<this.boundingBox.bottom},r.prototype.PointIsInObject=function(t,e){return this.PointIsInBoundingBox(t,e)},r.prototype.PressIsInObject=function(t,e){return this.pressPassThrough?!1:this.PointIsInObject(t,e)},r.prototype.UnPin=function(){this.sticky=!1,this.stickyPosition=null,this.NeedsUpdate=!0,this.NeedsRender=!0,this.parent&&this.parent.UpdateChildrenLists()},r.prototype.PinToFront=function(){this.sticky=!0,this.stickyPosition=r.STICKY_POSITION.FRONT,this.NeedsUpdate=!0,this.NeedsRender=!0,this.parent&&this.parent.UpdateChildrenLists()},r.prototype.PinToBack=function(){this.sticky=!0,this.stickyPosition=r.STICKY_POSITION.BACK,this.NeedsUpdate=!0,this.NeedsRender=!0,this.parent&&this.parent.UpdateChildrenLists()},r.prototype.MoveToFront=function(){if(this.parent){var t=this.parent.children.indexOf(this);t>=0&&(this.parent.children.splice(t,1),this.parent.children.splice(this.parent.children.length,0,this),this.parent.UpdateChildrenLists(),this.NeedsUpdate=!0,this.NeedsRender=!0)}},r.prototype.MoveToBack=function(){if(this.parent){var t=this.parent.children.indexOf(this);t>=0&&(this.parent.children.splice(t,1),this.parent.children.splice(0,0,this),this.parent.UpdateChildrenLists(),this.NeedsUpdate=!0,this.NeedsRender=!0)}},r.prototype.MoveForward=function(){if(this.parent){var t=this.parent.children.indexOf(this);t>=0&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent.UpdateChildrenLists(),this.NeedsUpdate=!0,this.NeedsRender=!0)}},r.prototype.MoveBackward=function(){if(this.parent){var t=this.parent.children.indexOf(this);t>0&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent.UpdateChildrenLists(),this.NeedsUpdate=!0,this.NeedsRender=!0)}},r.STICKY_POSITION={FRONT:"front",BACK:"back"},r.prototype.onpressdown=null,r.prototype.onpressup=null,r.prototype.onpressmove=null,r.prototype.onpresscancel=null,r}),n("line",["vector"],function(t){function e(e,n){this.p1=e,this.direction=n,this.p2=new t([this.p1.x,this.p1.y]).add(this.direction)}return e.prototype.p1=null,e.prototype.p2=null,e.prototype.direction=null,e.prototype.intersectionWith=function(t){return e.intersection(this,t)},e.intersection=function(e,n){var r=e.p1.x,i=e.p2.x,o=n.p1.x,a=n.p2.x,u=e.p1.y,s=e.p2.y,l=n.p1.y,c=n.p2.y,f=(r-i)*(l-c)-(u-s)*(o-a);if(0===f)return null;var h=(r*s-u*i)*(o-a)-(r-i)*(o*c-l*a),p=(r*s-u*i)*(l-c)-(u-s)*(o*c-l*a);return new t([h/f,p/f])},e}),n("vector-path",["lodash","canvas-object","renderer","vector","line"],function(t,e,n,r,i){function o(n){e.call(this,n),this.unscaledLineWidth=this.style.lineWidth,this.vertices=t.map(n.vertices||[],function(t){return new r([t.x,t.y])});var i=t.map(this.vertices,function(t){return t.y}),o=t.map(this.vertices,function(t){return t.x});this._left=Math.min.apply(null,o),this._top=Math.min.apply(null,i),this._right=Math.max.apply(null,o),this._bottom=Math.max.apply(null,i),this.d=new r([this._left,this._top]);var a=this.d;this._normalizedVertices=t.map(this.vertices,function(t){return t.subtract(a)}),this._normalizedBoundingBox=null,Object.defineProperty(this,"boundingBox",{configurable:!0,enumerable:!0,get:function(){var t=0,e=0,n=this._bottom-this._top,r=this._right-this._left;return this._normalizedBoundingBox={top:t,left:e,right:r,bottom:n},{top:this._normalizedBoundingBox.top*this.GlobalScale.scaleHeight+this.offset.y-this.GlobalLineScale*this.unscaledLineWidth,left:this._normalizedBoundingBox.left*this.GlobalScale.scaleWidth+this.offset.x-this.GlobalLineScale*this.unscaledLineWidth,bottom:this._normalizedBoundingBox.bottom*this.GlobalScale.scaleHeight+this.offset.y+this.GlobalLineScale*this.unscaledLineWidth,right:this._normalizedBoundingBox.right*this.GlobalScale.scaleWidth+this.offset.x+this.GlobalLineScale*this.unscaledLineWidth}}})}return t.assign(o.prototype,e.prototype),o.prototype.render=function(){var e=this.boundingBox,i=this.offset,o=this.GlobalScale,a=t.map(this._normalizedVertices,function(t){return t.multiply(new r([o.scaleWidth,o.scaleHeight])).subtract(new r([e.left,e.top])).add(i)});n.drawPath(this._prerenderingContext,a,this.style)},o.prototype.PointIsInObject=function(t,n){var o=!1;if(e.prototype.PointIsInObject.call(this,t,n))for(var a=new i(new r([t,n]),new r([1,0])),u=0;u<this._normalizedVertices.length;u++){var s=u+1>=this._normalizedVertices.length?0:u+1,l=this._normalizedVertices[u].multiply(new r([this.GlobalScale.scaleWidth,this.GlobalScale.scaleHeight])).add(this.offset),c=this._normalizedVertices[s].multiply(new r([this.GlobalScale.scaleWidth,this.GlobalScale.scaleHeight])).add(this.offset),f=c.subtract(l).unitVector,h=new i(l,f),p=h.intersectionWith(a);
if(null!==p){var d=p.x-t>=0;if(d){var g=f.x<0,v=f.y<0,y=g?c:l,_=g?l:c,b=v?c:l,m=v?l:c,x=p.x-y.x>=0&&_.x-p.x>=0&&p.y-b.y>=0&&m.y-p.y>=0;x&&(o=!o)}}}return o},o}),n("rectangle",["lodash","canvas-object","renderer"],function(t,e,n){function r(t){e.call(this,t),this.width=t.width||0,this.height=t.height||0,Object.defineProperty(this,"boundingBox",{configurable:!0,enumerable:!0,get:function(){return{top:this.offset.y-this.GlobalLineScale*this.unscaledLineWidth/2,left:this.offset.x-this.GlobalLineScale*this.unscaledLineWidth/2,bottom:this.offset.y+this.GlobalScale.scaleHeight*this.height+this.GlobalLineScale*this.unscaledLineWidth/2,right:this.offset.x+this.GlobalScale.scaleWidth*this.width+this.GlobalLineScale*this.unscaledLineWidth/2}}})}return t.assign(r.prototype,e.prototype),r.prototype.render=function(){n.drawRectangle(this._prerenderingContext,this.GlobalLineScale*this.unscaledLineWidth/2,this.GlobalLineScale*this.unscaledLineWidth/2,this.width*this.GlobalScale.scaleWidth,this.height*this.GlobalScale.scaleHeight,this.style)},r}),n("ellipse",["lodash","canvas-object","renderer"],function(t,e,n){function r(t){e.call(this,t),this.radius=t.radius||0,this.minorRadius=t.minorRadius||this.radius||0,Object.defineProperty(this,"boundingBox",{configurable:!0,enumerable:!0,get:function(){return{top:this.offset.y-(this.minorRadius*this.GlobalScale.scaleHeight+this.unscaledLineWidth/2*this.GlobalLineScale),left:this.offset.x-(this.radius*this.GlobalScale.scaleWidth+this.unscaledLineWidth/2*this.GlobalLineScale),bottom:this.offset.y+this.minorRadius*this.GlobalScale.scaleHeight+this.unscaledLineWidth/2*this.GlobalLineScale,right:this.offset.x+this.radius*this.GlobalScale.scaleWidth+this.unscaledLineWidth/2*this.GlobalLineScale}}})}return t.assign(r.prototype,e.prototype),r.prototype.render=function(){n.drawEllipse(this._prerenderingContext,this.radius*this.GlobalScale.scaleWidth+this.unscaledLineWidth/2*this.GlobalLineScale,this.minorRadius*this.GlobalScale.scaleHeight+this.unscaledLineWidth/2*this.GlobalLineScale,this.radius*this.GlobalScale.scaleWidth,this.minorRadius*this.GlobalScale.scaleHeight,this.style)},r.prototype.PointIsInObject=function(t,n){return e.prototype.PointIsInObject.call(this,t,n)&&Math.pow(t-this.offset.x,2)/Math.pow(this.radius*this.GlobalScale.scaleWidth,2)+Math.pow(n-this.offset.y,2)/Math.pow(this.minorRadius*this.GlobalScale.scaleHeight,2)<=1},r}),n("circle",["lodash","canvas-object","renderer"],function(t,e,n){function r(t){e.call(this,t),this.radius=t.radius||0,Object.defineProperty(this,"boundingBox",{configurable:!0,enumerable:!0,get:function(){return{top:this.offset.y-(this.radius*this.GlobalScale.scaleHeight+this.unscaledLineWidth/2*this.GlobalLineScale),left:this.offset.x-(this.radius*this.GlobalScale.scaleWidth+this.unscaledLineWidth/2*this.GlobalLineScale),bottom:this.offset.y+this.radius*this.GlobalScale.scaleHeight+this.unscaledLineWidth/2*this.GlobalLineScale,right:this.offset.x+this.radius*this.GlobalScale.scaleWidth+this.unscaledLineWidth/2*this.GlobalLineScale}}})}return t.assign(r.prototype,e.prototype),r.prototype.render=function(){n.drawCircle(this._prerenderingContext,this.radius*this.GlobalScale.scaleWidth+this.unscaledLineWidth/2*this.GlobalLineScale,this.radius*this.GlobalScale.scaleHeight+this.unscaledLineWidth/2*this.GlobalLineScale,this.radius*this.GlobalScale.scaleWidth,this.style)},r.prototype.PointIsInObject=function(t,n){return e.prototype.PointIsInObject.call(this,t,n)&&Math.pow(t-this.offset.x,2)/Math.pow(this.radius*this.GlobalScale.scaleWidth,2)+Math.pow(n-this.offset.y,2)/Math.pow(this.radius*this.GlobalScale.scaleHeight,2)<=1},r}),n("text",["lodash","canvas-object","renderer"],function(t,e,n){function r(t){var e=document.createElement("span");e.innerText=o,e.style.font=t;var n=document.createElement("div");n.style.display="inline-block",n.style.width="1px",n.style.height="0",n.style.verticalAlign="baseline";var r=document.createElement("div");r.appendChild(e),r.appendChild(n),r.style.whiteSpace="nowrap",document.body.appendChild(r);var i=e.getBoundingClientRect(),a=n.getBoundingClientRect(),u=i.top+document.body.scrollTop,s=u+i.height,l=a.top+document.body.scrollTop;document.body.removeChild(r);var c=l-u,f=s-l;return{height:i.height,ascent:c,descent:f}}function i(o){e.call(this,o),this.text=o.text,this.unscaledFontSize=o.fontSize||i.DEFAULTS.fontSize,this.fontFamily=o.fontFamily||i.DEFAULTS.fontFamily,this.fontStyle=o.fontStyle||i.DEFAULTS.fontStyle,this.fontVariant=o.fontVariant||i.DEFAULTS.fontVariant,this.fontWeight=o.fontWeight||i.DEFAULTS.fontWeight,this.lineHeight=o.lineHeight||i.DEFAULTS.lineHeight,this.textAlign=o.textAlign||i.DEFAULTS.textAlign,this.textBaseline=o.textBaseline||i.DEFAULTS.textBaseline,this._textMetricsNeedUpdate=!0,Object.defineProperty(this,"fontSize",{configurable:!0,enumerable:!0,get:function(){return parseFloat(this.unscaledFontSize)*this.GlobalFontScale+"px"}}),Object.defineProperty(this,"textMetrics",{configurable:!0,enumerable:!0,get:function(){return(null===this._textMetrics||this._textMetricsNeedUpdate)&&(this._updateStyle(),this._textMetrics=n.measureText(this._prerenderingContext,this.text,this.style),t.extend(this._textMetrics,r(this.style.font)),this._textMetricsNeedUpdate=!1),this._textMetrics}}),Object.defineProperty(this,"boundingBox",{configurable:!0,enumerable:!0,get:function(){return{top:this.offset.y-this.textMetrics.ascent,left:this.offset.x,bottom:this.offset.y+this.textMetrics.descent,right:this.offset.x+this.textMetrics.width}}})}var o="1234567890QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm";return t.assign(i.prototype,e.prototype),i.prototype._updateStyle=function(e){t.assign(this.style,e||{},{font:i.FormatFontString(this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.lineHeight,this.fontFamily),textAlign:this.textAlign,textBaseline:this.textBaseline})},i.FormatFontString=function(t,e,n,r,i,o){return t+" "+e+" "+n+" "+r+"/"+i+" "+o},i.DEFAULTS={fontSize:"16px",fontFamily:"sans-serif",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineHeight:"normal",textAlign:"start",textBaseline:"alphabetic"},i.prototype.render=function(){this._textMetricsNeedUpdate=!0,this._updateStyle(),n.drawText(this._prerenderingContext,0,this.textMetrics.ascent,this.text,this.style),this.flags.DEBUG&&(n.drawPath(this._prerenderingContext,[{x:0,y:this.textMetrics.ascent},{x:this.textMetrics.width,y:this.textMetrics.ascent}],{strokeStyle:"Blue"}),n.drawCircle(this._prerenderingContext,0,this.textMetrics.ascent,3,{strokeStyle:"Blue",fillStyle:"Blue"}))},i.prototype.PointIsInObject=function(t,n){return e.prototype.PointIsInObject.call(this,t,n)},i}),n("image",["lodash","canvas-object","renderer"],function(t,e,n){function r(t){e.call(this,t),this.unscaledImage=t.image,Object.defineProperty(this,"boundingBox",{configurable:!0,enumerable:!0,get:function(){return{top:this.offset.y,left:this.offset.x,bottom:this.offset.y+this.GlobalScale.scaleHeight*this.unscaledImage.height,right:this.offset.x+this.GlobalScale.scaleWidth*this.unscaledImage.width}}})}return t.assign(r.prototype,e.prototype),r.prototype.render=function(){var t=new window.Image;t.src=this.unscaledImage.src,t.width=this.unscaledImage.width*this.GlobalScale.scaleWidth,t.height=this.unscaledImage.height*this.GlobalScale.scaleHeight,n.drawImage(this._prerenderingContext,0,0,t,this.style)},r}),n("container",["lodash","canvas-object","renderer"],function(t,e){function n(n){e.call(this,n),this.children=n.children||[],this.masks=n.masks||[],Object.defineProperty(this,"boundingBox",{configurable:!0,enumerable:!0,get:function(){var e=null,n=null,r=null,i=null;return t.each(this.children,function(t){e=null!==e&&e<t.boundingBox.top?e:t.boundingBox.top,n=null!==n&&n<t.boundingBox.left?n:t.boundingBox.left,r=null!==r&&r>t.boundingBox.bottom?r:t.boundingBox.bottom,i=null!==i&&i>t.boundingBox.right?i:t.boundingBox.right}),{top:e,left:n,bottom:r,right:i}}})}return t.assign(n.prototype,e.prototype),n.prototype.masks=[],n.prototype.children=[],n.prototype.frontChildren=[],n.prototype.backChildren=[],n.prototype.middleChildren=[],n.prototype.mostRecentlyAddedChild=null,n.prototype.ChildrenAt=function(e,n){return t.filter(this.children,function(t){return t.PointIsInObject(e,n)})},n.prototype.PressableChildrenAt=function(e,n){return t.filter(this.children,function(t){return t.PressIsInObject(e,n)})},n.prototype.UpdateChildrenLists=function(){this.frontChildren=t.filter(this.children,function(t){return t.sticky&&t.stickyPosition===e.STICKY_POSITION.FRONT}),this.backChildren=t.filter(this.children,function(t){return t.sticky&&t.stickyPosition===e.STICKY_POSITION.BACK}),this.middleChildren=t.filter(this.children,function(t){return!t.sticky})},n.prototype.ChildAt=function(t,e){for(var n=this.frontChildren.length-1;n>=0;n--)if(this.frontChildren[n].PointIsInObject(t,e))return this.frontChildren[n];for(var r=this.middleChildren.length-1;r>=0;r--)if(this.middleChildren[r].PointIsInObject(t,e))return this.middleChildren[r];for(var i=this.backChildren.length-1;i>=0;i--)if(this.backChildren[i].PointIsInObject(t,e))return this.backChildren[i];return null},n.prototype.PressableChildAt=function(t,e){if(this.pressPassThrough)return null;for(var n=this.frontChildren.length-1;n>=0;n--)if(this.frontChildren[n].PressIsInObject(t,e))return this.frontChildren[n];for(var r=this.middleChildren.length-1;r>=0;r--)if(this.middleChildren[r].PressIsInObject(t,e))return this.middleChildren[r];for(var i=this.backChildren.length-1;i>=0;i--)if(this.backChildren[i].PressIsInObject(t,e))return this.backChildren[i];return null},n.prototype.PointIsInObject=function(t,n){if(e.prototype.PointIsInObject.call(this,t,n)){for(var r in this.frontChildren)if(this.frontChildren[r].PointIsInObject(t,n))return!0;for(var i in this.middleChildren)if(this.middleChildren[i].PointIsInObject(t,n))return!0;for(var o in this.backChildren)if(this.backChildren[o].PointIsInObject(t,n))return!0}return!1},n.prototype.addChild=function(t){t.parent=this,this.children.push(t),this.mostRecentlyAddedChild=t,this.UpdateChildrenLists(),this.NeedsUpdate=!0,this.NeedsRender=!0,this.onchildadded&&this.onchildadded()},n.prototype.removeChild=function(t){if(t){var e=this.children.indexOf(t);e>=0&&(this.children.splice(e,1),this.UpdateChildrenLists(),this.NeedsUpdate=!0,this.NeedsRender=!0)}},n.prototype.addMask=function(t){t.parent=this,this.masks.push(t),this.NeedsUpdate=!0,this.NeedsRender=!0},n.prototype.render=function(){var e=this._prerenderingContext,n={top:-this.boundingBox.top,left:-this.boundingBox.left,bottom:-this.boundingBox.bottom,right:-this.boundingBox.right};t.each(this.backChildren,function(t){t.draw(e,n)}),t.each(this.middleChildren,function(t){t.draw(e,n)}),t.each(this.frontChildren,function(t){t.draw(e,n)}),e.globalCompositeOperation="destination-out",t.each(this.masks,function(t){t.draw(e,n)}),e.globalCompositeOperation="normal"},n.prototype.parent=null,n.prototype.children=[],n}),n("canvas-compositor",["lodash","renderer","canvas-object","vector-path","rectangle","ellipse","circle","text","image","container"],function(t,e,n,r,i,o,a,u,s,l){function c(n,r){this._canvas=n,this._context=this._canvas.getContext("2d"),this._targetObject=null,this._updateThreshhold=1e3/60,this._lastRenderTime=0,this._currentTime=0,this.style=t.extend({},e.DEFAULTS,r),this.Scene=new l({x:0,y:0}),this._bindEvents(),this._eventRegistry={onpressup:[],onpressdown:[],onpressmove:[],onpresscancel:[],onpress:[]},this._animationLoop()}function f(t,e){var n;n=e.touches.length?{screenX:e.touches[0].screenX,screenY:e.touches[0].screenY,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY,button:0}:h,h=n;var r=new window.MouseEvent(t,n);e.target.dispatchEvent(r)}var h,p={PRESS_UP:"onpressup",PRESS_DOWN:"onpressdown",PRESS_MOVE:"onpressmove",PRESS_CANCEL:"onpresscancel",PRESS:"onpress"};return c.prototype.registerEvent=function(t,e){this._eventRegistry[t]&&this._eventRegistry[t].push(e)},c.prototype.removeEvent=function(t,e){if(this._eventRegistry[t]){var n=this._eventRegistry[t].indexOf(e);if(n>=0)return this._eventRegistry[t].splice(n,1)}},c.prototype._bindEvents=function(){this._canvas.addEventListener("mousedown",t.bind(this._handlePressDown,this)),this._canvas.addEventListener("mouseup",t.bind(this._handlePressUp,this)),this._canvas.addEventListener("mousemove",t.bind(this._handlePressMove,this)),this._canvas.addEventListener("mouseout",t.bind(this._handlePressCancel,this)),this._canvas.addEventListener("click",t.bind(this._handlePress,this)),this._canvas.addEventListener("touchstart",function(t){t.preventDefault(),t.stopPropagation(),f("mousedown",t)}),this._canvas.addEventListener("touchend",function(t){t.preventDefault(),t.stopPropagation(),f("mouseup",t)}),this._canvas.addEventListener("touchmove",function(t){t.preventDefault(),t.stopPropagation(),f("mousemove",t)}),this._canvas.addEventListener("touchcancel",function(t){t.preventDefault(),t.stopPropagation(),f("mouseout",t)})},c.prototype._handlePressDown=function(e){e.preventDefault();var n=window.getComputedStyle(this._canvas),r=parseFloat(n.getPropertyValue("border-left"))+parseFloat(n.getPropertyValue("padding-left")),i=parseFloat(n.getPropertyValue("border-top"))+parseFloat(n.getPropertyValue("padding-top")),o=e.offsetX-r,a=e.offsetY-i;e.canvasX=o,e.canvasY=a,t.each(this._eventRegistry[p.PRESS_DOWN],function(t){t(e)});var u=this.Scene.PressableChildAt(o,a);u&&u.onpressdown&&u.onpressdown(e)},c.prototype._handlePressUp=function(e){e.preventDefault();var n=window.getComputedStyle(this._canvas),r=parseFloat(n.getPropertyValue("border-left"))+parseFloat(n.getPropertyValue("padding-left")),i=parseFloat(n.getPropertyValue("border-top"))+parseFloat(n.getPropertyValue("padding-top")),o=e.offsetX-r,a=e.offsetY-i;e.canvasX=o,e.canvasY=a,t.each(this.Scene.children,function(t){t.draggable&&t.onpressup&&t.onpressup(e)}),t.each(this._eventRegistry[p.PRESS_UP],function(t){t(e)});var u=this.Scene.PressableChildAt(o,a);u&&u.onpressup&&u.onpressup(e)},c.prototype._handlePressMove=function(e){e.preventDefault();var n=t.filter(this.Scene.children,function(t){return!!t.onpressmove});t.each(this._eventRegistry[p.PRESS_MOVE],function(t){t(e)}),t.each(n,function(t){t.onpressmove(e)})},c.prototype._handlePress=function(e){e.preventDefault();var n=window.getComputedStyle(this._canvas),r=parseFloat(n.getPropertyValue("border-left"))+parseFloat(n.getPropertyValue("padding-left")),i=parseFloat(n.getPropertyValue("border-top"))+parseFloat(n.getPropertyValue("padding-top")),o=e.offsetX-r,a=e.offsetY-i;e.canvasX=o,e.canvasY=a;var u=t.filter(this.Scene.children,function(t){return!!t.onpress});t.each(this._eventRegistry[p.PRESS],function(t){t(e)}),t.each(u,function(t){t.onpress(e)})},c.prototype._handlePressCancel=function(e){e.preventDefault();var n=t.filter(this.Scene.children,function(t){return!!t.onpresscancel});t.each(n,function(t){t.onpresscancel(e)}),t.each(this._eventRegistry[p.PRESS_CANCEL],function(t){t(e)})},Object.defineProperty(c.prototype,"targetObject",{configurable:!0,enumerable:!0,get:function(){return this._targetObject},set:function(t){this._targetObject=t}}),c.prototype._animationLoop=function(){window.requestAnimationFrame(t.bind(this._animationLoop,this)),this._currentTime=+new Date,this._currentTime-this._lastRenderTime>=this._updateThreshhold&&this.Scene.NeedsUpdate&&(this._lastRenderTime=+new Date,e.clearRect(this._context,0,0,this._canvas.width,this._canvas.height),this.Scene.draw(this._context))},c.prototype.drawPath=function(t){e.drawPath(this._context,t,this.style)},c.prototype.drawRectangle=function(t,n,r,i){e.drawRectangle(this._context,t,n,r,i||r,this.style)},c.prototype.drawEllipse=function(t,n,r,i){e.drawEllipse(this._context,t,n,r,i||r,this.style)},c.prototype.drawCircle=function(t,n,r){e.drawEllipse(this._context,t,n,r,this.style)},c.prototype.drawText=function(t,n,r){e.drawText(this._context,t,n,r,this.style)},c.prototype.measureText=function(t){e.measureText(this._context,t,this.style)},c.prototype.drawImage=function(t,n,r){e.drawImage(this._context,t,n,r,this.style)},c.prototype.draw=function(t){return t?void t.draw():void 0},c.prototype.getContext=function(){return this._context},c.Path=r,c.Rectangle=i,c.Ellipse=o,c.Text=u,c.Image=s,c.Circle=a,c.Container=l,c.Events=p,c.prototype.Scene=null,c}),e("canvas-compositor")});