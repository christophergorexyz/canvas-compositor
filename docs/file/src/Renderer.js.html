<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">src/Renderer.js | canvas-compositor</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="a light and performant canvas compositing engine"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="canvas-compositor"><meta property="twitter:description" content="a light and performant canvas compositing engine"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/theOutLiar/canvas-compositor"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Bezier.js~Bezier.html">Bezier</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Circle.js~Circle.html">Circle</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Composition.js~Composition.html">Composition</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Ellipse.js~Ellipse.html">Ellipse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Image.js~Image.html">Image</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Line.js~Line.html">Line</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/PrimitiveComponent.js~PrimitiveComponent.html">PrimitiveComponent</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Rectangle.js~Rectangle.html">Rectangle</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Renderer.js~Renderer.html">Renderer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/Text.js~Text.html">Text</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/VectorPath.js~VectorPath.html">VectorPath</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-init">init</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-EPSILON">EPSILON</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-CLICK">CLICK</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-KEYDOWN">KEYDOWN</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-KEYPRESS">KEYPRESS</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-KEYUP">KEYUP</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-MOUSEDOWN">MOUSEDOWN</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-MOUSEMOVE">MOUSEMOVE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-MOUSEOUT">MOUSEOUT</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-MOUSEUP">MOUSEUP</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-DEFAULTS">DEFAULTS</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/Renderer.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">/**
 * Default style values for the renderer
 */
export const DEFAULTS = {
    //direction: &apos;inherit&apos;,
    fillStyle: &apos;black&apos;,
    //filter: &apos;none&apos;,
    strokeStyle: &apos;black&apos;,
    lineCap: &apos;round&apos;,
    lineWidth: 1.0,
    lineJoin: &apos;round&apos;,
    miterLimit: 10,
    font: &apos;10px sans-serif&apos;,
    textAlign: &apos;start&apos;,
    textBaseline: &apos;alphabetic&apos;,
    lineDash: []
}

/**
 * A collection of high level static methods for drawing directly to canvas
 *
 */
export class Renderer {
    /**
     * Erase everything drawn on the supplied rectangle for the given context.
     * @param {number} x the x coordinate of the top left corner
     * @param {number} y the y coordinate of the top left corner
     * @param {number} width the x coordinate
     * @param {number} height the y coordinate
     * @param {object} context the 2D Context object for the canvas we&apos;re drawing onto
     */
    static clearRect(x, y, width, height, context) {
        context.clearRect(x, y, width, height);
    }

    /**
     * Draw a path, unclosed, with the given vertices
     * @param {object} vertices the path of vertices to be drawn
     * @param {object} context the 2D Context object for the canvas we&apos;re drawing onto
     * @param {object} style the style options to be used when drawing the path
     */
    static drawPath(vertices, context, style) {
        Object.assign(context, style);
        context.beginPath();
        context.moveTo(vertices[0].x, vertices[0].y);
        for (let v = 1; v &lt; vertices.length; v++) {
            context.lineTo(vertices[v].x, vertices[v].y);
        }

        context.setLineDash(style.lineDash);
        context.stroke();
    }

    /**
     * Draw a closed polygon with the given vertices
     * @param {object} vertices the path of vertices to be drawn
     * @param {object} context the 2D Context object for the canvas we&apos;re drawing onto
     * @param {object} style the style options to be used when drawing the polygon
     */
    static drawPolygon(vertices, context, style) {
        Object.assign(context, style);
        context.beginPath();
        context.moveTo(vertices[0].x, vertices[0].y);
        for (let v = 1; v &lt; vertices.length; v++) {
            context.lineTo(vertices[v].x, vertices[v].y);
        }
        context.closePath();
        context.setLineDash(style.lineDash);
        context.stroke();
    }

    static drawBezier(start, end, c1, c2, context, style) {
        Object.assign(context, style);
        //must `beginPath()` before `moveTo` to get correct starting position
        context.beginPath();
        context.moveTo(start.x, start.y);
        context.bezierCurveTo(c1.x, c1.y, c2.x, c2.y, end.x, end.y);
        context.setLineDash(style.lineDash);
        context.stroke();
        context.closePath();
    }

    /**
     * Draw a rectangle
     * @param {number} x the x coordinate of the top let corner
     * @param {number} y the y coordinate of the top left corner
     * @param {number} width the x coordinate
     * @param {number} height the y coordinate
     * @param {object} context the 2D Context object for the canvas we&apos;re drawing onto
     * @param {object} style the style options to be used when drawing the rectangle
     */
    static drawRectangle(x, y, width, height, context, style) {
        Object.assign(context, style);
        context.rect(x, y, width, height);
        context.fill();
        context.setLineDash(style.lineDash);
        context.stroke();
    }

    //TODO: provide support for rotation and startAngle parameters
    /**
     * Draw an ellipse
     * @param {number} x the x coordinate of the center of the ellipse
     * @param {number} y the y coordinate of the center of the ellipse
     * @param {number} radius the larger radius of the ellipse
     * @param {number} minorRadius the smaller radius of the ellipse
     * @param {object} context the 2D Context object for the canvas we&apos;re drawing onto
     * @param {object} style the style options to be used when drawing the ellipse
     */
    static drawEllipse(x, y, radius, minorRadius, context, style) {
        Object.assign(context, style);
        //TODO: 2017-05-22 this is currently not supported by IE
        context.ellipse(x, y, radius, minorRadius, 0, 0, 2 * Math.PI);
        context.fill();
        context.setLineDash(style.lineDash);
        context.stroke();
    }

    /**
     * Draw a circle
     * @param {number} x the x coordinate of the center of the circle
     * @param {number} y the y coordinate of the center of the circle
     * @param {number} radius of the circle
     * @param {object} context the 2D Context object for the canvas we&apos;re drawing onto
     * @param {object} style the style options to be used when drawing the circle
     */
    static drawCircle(x, y, radius, context, style) {
        Object.assign(context, style);
        context.arc(x, y, radius, 0, 2 * Math.PI);
        //TODO: 2015-03-12 this is currently only supported by chrome &amp; opera
        //context.ellipse(x, y, radius, radius, 0, 0, 2 * Math.PI);
        context.fill();
        context.setLineDash(style.lineDash);
        context.stroke();
    }

    /**
     * Draw text
     * @param {number} x the x coordinate of the top let corner
     * @param {number} y the y coordinate of the top left corner
     * @param {string} text the text to be drawn
     * @param {object} context the 2D Context object for the canvas we&apos;re drawing onto
     * @param {object} style the style options to be used when drawing the text
     */
    static drawText(x, y, text, context, style) {
        Object.assign(context, style);
        context.fillText(text, x, y);
        //TODO: implement stroke text if specified
    }

    /**
     * Draw an image
     * @param {number} x the x coordinate of the top let corner
     * @param {number} y the y coordinate of the top left corner
     * @param {object} image the image to be drawn to the canvas
     * @param {object} context the 2D Context object for the canvas we&apos;re drawing onto
     * @param {object} style the style options to be used when drawing the image
     */
    static drawImage(x, y, image, context, style) {
        Object.assign(context, style);
        //no reason to draw 0-sized images
        if (image.width &gt; 0 &amp;&amp; image.height &gt; 0) {
            context.drawImage(image, x, y, image.width, image.height);
        }
    }

    //TODO: this should probably be exposed elsewhere/differently
    /**
     * Measure the text
     * @param {string} text the text to be measured
     * @param {object} context the 2D Context object for a canvas - required for measurement to occur, but may be arbitrary
     * @param {object} style the style options to be used when measuring the text
     * @return {object} [TextMetrics](https://developer.mozilla.org/en-US/docs/Web/API/TextMetrics) object containing info like Width
     */
    static measureText(text, context, style) {
        Object.assign(context, style);
        return context.measureText(text);
    }
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
