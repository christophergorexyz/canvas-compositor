{"version":3,"sources":["../src/TextUtilities.js"],"names":["ALL_CHARS","getTextHeight","font","fontHolder","document","createElement","innerText","style","baselineRuler","display","width","height","verticalAlign","wrapper","appendChild","whiteSpace","body","fontRect","getBoundingClientRect","baselineRect","fontTop","top","scrollTop","fontBottom","baseline","removeChild","ascentFromBaseline","descentFromBaseline","ascent","descent","formatFontString","fontStyle","fontVariant","fontWeight","fontSize","lineHeight","fontFamily","measureText","text","context","Object","assign"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA,IAAMA,SAAS,kGAAf;AAEA;AACA;AACA;AACA;AACA;AACA;;AACO,SAASC,aAAT,CAAuBC,IAAvB,EAA6B;AAChC;AACA;AAEA;AACA,MAAIC,UAAU,GAAGC,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAjB;AACAF,EAAAA,UAAU,CAACG,SAAX,GAAuBN,SAAvB;AACAG,EAAAA,UAAU,CAACI,KAAX,CAAiBL,IAAjB,GAAwBA,IAAxB,CAPgC,CAShC;;AACA,MAAIM,aAAa,GAAGJ,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAApB;AACAG,EAAAA,aAAa,CAACD,KAAd,CAAoBE,OAApB,GAA8B,cAA9B;AACAD,EAAAA,aAAa,CAACD,KAAd,CAAoBG,KAApB,GAA4B,KAA5B;AACAF,EAAAA,aAAa,CAACD,KAAd,CAAoBI,MAApB,GAA6B,GAA7B;AACAH,EAAAA,aAAa,CAACD,KAAd,CAAoBK,aAApB,GAAoC,UAApC,CAdgC,CAgBhC;;AACA,MAAIC,OAAO,GAAGT,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAd;AACAQ,EAAAA,OAAO,CAACC,WAAR,CAAoBX,UAApB;AACAU,EAAAA,OAAO,CAACC,WAAR,CAAoBN,aAApB;AACAK,EAAAA,OAAO,CAACN,KAAR,CAAcQ,UAAd,GAA2B,QAA3B;AACAX,EAAAA,QAAQ,CAACY,IAAT,CAAcF,WAAd,CAA0BD,OAA1B,EArBgC,CAuBhC;;AACA,MAAII,QAAQ,GAAGd,UAAU,CAACe,qBAAX,EAAf;AACA,MAAIC,YAAY,GAAGX,aAAa,CAACU,qBAAd,EAAnB,CAzBgC,CA2BhC;;AACA,MAAIE,OAAO,GAAGH,QAAQ,CAACI,GAAT,GAAejB,QAAQ,CAACY,IAAT,CAAcM,SAA3C;AACA,MAAIC,UAAU,GAAGH,OAAO,GAAGH,QAAQ,CAACN,MAApC;AAEA,MAAIa,QAAQ,GAAGL,YAAY,CAACE,GAAb,GAAmBjB,QAAQ,CAACY,IAAT,CAAcM,SAAhD;AAEAlB,EAAAA,QAAQ,CAACY,IAAT,CAAcS,WAAd,CAA0BZ,OAA1B,EAjCgC,CAmChC;;AACA,MAAIa,kBAAkB,GAAGF,QAAQ,GAAGJ,OAApC,CApCgC,CAsChC;;AACA,MAAIO,mBAAmB,GAAGJ,UAAU,GAAGC,QAAvC;AAEA,SAAO;AACHb,IAAAA,MAAM,EAAEM,QAAQ,CAACN,MADd;AAEHiB,IAAAA,MAAM,EAAEF,kBAFL;AAGHG,IAAAA,OAAO,EAAEF;AAHN,GAAP;AAKH;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACO,SAASG,gBAAT,CAA0BC,SAA1B,EAAqCC,WAArC,EAAkDC,UAAlD,EAA8DC,QAA9D,EAAwEC,UAAxE,EAAoFC,UAApF,EAAgG;AACnG,mBAAUL,SAAV,cAAuBC,WAAvB,cAAsCC,UAAtC,cAAoDC,QAApD,cAAgEC,UAAhE,cAA8EC,UAA9E;AACH;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;;AACO,SAASC,WAAT,CAAqBC,IAArB,EAA2BC,OAA3B,EAAoChC,KAApC,EAA2C;AAC9CiC,EAAAA,MAAM,CAACC,MAAP,CAAcF,OAAd,EAAuBhC,KAAvB;AACA,SAAOgC,OAAO,CAACF,WAAR,CAAoBC,IAApB,CAAP;AACH","sourcesContent":["/**\n * As many basic characters as possible to fit into a string in order to measure the height\n */\nconst ALL_CHARS = `1234567890QWERTYUIOPASDFGHJKLZXCVBNMqwertyuiopasdfghjklzxcvbnm.,\\`~;:'\"!?@#$%^&*()_+={}[]|\\<>/`;\n\n/**\n * this technique is informed by\n * http://stackoverflow.com/questions/1134586/how-can-you-find-the-height-of-text-on-an-html-canvas\n * it's a pretty awful hack, and will not work in canvases on non-browser runtimes\n * @param {string} font the long form font string\n */\nexport function getTextHeight(font) {\n    //\n    //TODO: figure out how cross-browser this is\n\n    //create an element with every character in it with this font\n    let fontHolder = document.createElement('span');\n    fontHolder.innerText = ALL_CHARS;\n    fontHolder.style.font = font;\n\n    //create an inline-block to place after the element\n    let baselineRuler = document.createElement('div');\n    baselineRuler.style.display = 'inline-block';\n    baselineRuler.style.width = '1px';\n    baselineRuler.style.height = '0';\n    baselineRuler.style.verticalAlign = 'baseline';\n\n    //place them in a wrapper and add it to the body\n    let wrapper = document.createElement('div');\n    wrapper.appendChild(fontHolder);\n    wrapper.appendChild(baselineRuler);\n    wrapper.style.whiteSpace = 'nowrap';\n    document.body.appendChild(wrapper);\n\n    //get their bounding rectangles and...\n    let fontRect = fontHolder.getBoundingClientRect();\n    let baselineRect = baselineRuler.getBoundingClientRect();\n\n    //calculate their offset from top\n    let fontTop = fontRect.top + document.body.scrollTop;\n    let fontBottom = fontTop + fontRect.height;\n\n    let baseline = baselineRect.top + document.body.scrollTop;\n\n    document.body.removeChild(wrapper);\n\n    //ascent equals the baseline location minus text top location\n    let ascentFromBaseline = baseline - fontTop;\n\n    //decent equals the text bottom location minuse the baseline location\n    let descentFromBaseline = fontBottom - baseline;\n\n    return {\n        height: fontRect.height,\n        ascent: ascentFromBaseline,\n        descent: descentFromBaseline\n    };\n}\n\n\n/**\n * format a longform font style\n * @param {string} fontStyle the font style\n * @param {string} fontVariant the font variant\n * @param {string} fontWeight the font weight\n * @param {string} fontSize the font size\n * @param {string} lineHeight the font height\n * @param {string} fontFamily the font family\n */\nexport function formatFontString(fontStyle, fontVariant, fontWeight, fontSize, lineHeight, fontFamily) {\n    return `${fontStyle} ${fontVariant} ${fontWeight} ${fontSize}/${lineHeight} ${fontFamily}`;\n}\n\n/**\n * Measure the text\n * @param {string} text the text to be measured\n * @param {object} context the 2D Context object for a canvas - required for measurement to occur, but may be arbitrary\n * @param {object} style the style options to be used when measuring the text\n * @return {object} [TextMetrics](https://developer.mozilla.org/en-US/docs/Web/API/TextMetrics) object containing info like Width\n */\nexport function measureText(text, context, style) {\n    Object.assign(context, style);\n    return context.measureText(text);\n}\n"],"file":"TextUtilities.js"}